# Changelog

### This is a list detailing changes for all Jetpack CRM releases.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [6.4.3] - 2024-05-23
### Added
- Currency: Added several new currencies to the currency dropdown. [#36897]
- Fonts: Updated core Noto Sans, and added new CJK fonts. [#36962]
- Readme: Adding information on how to contribute to Jetpack CRM. [#36847]
- WooSync: Added new status mapping to avoid creating invoices and transactions from WooCommerce to Jetpack CRM. [#37276]

### Changed
- General: use wp_admin_notice function introduced in WP 6.4 to display notices. [#37051]
- Updated package dependencies. [#36775] [#37147] [#37148] [#37348] [#37379] [#37380] [#37382]

### Removed
- Contact Form: Updated a comment reference to Grunion_Contact_Form_Plugin to be Contact_Form_Plugin. [#37157]

### Fixed
- Companies: Increased city field size from 100 to 200. [#37509]
- Contacts: Increased city field size from 100 to 200. [#37509]
- Invoices: Fix "image not found" logo issue in PDF invoices. [#37311]
- Invoices: Remove the blank line below the contact name. [#37462]
- Listviews: Invoice quick filter status fix to prevent filters not working. [#37048]
- MailPoet Sync: Fix pending pages percentage calculation issue. [#37508]

## [6.4.2] - 2024-04-08
### Added
- Dashboard: Sales Funnel now links to contact list view. [#36272]
- Dashboard: Display red bubble notification in My Jetpack when installation is bad. [#36449]

### Changed
- Dashboard: Only show installation errors on plugins page. [#36390]
- Segments: Increased performance. [#36204]
- WooSync: Added a setting to enable invoices generated by WooCommerce to use the Jetpack CRM invoice reference system. [#36727]

### Fixed
- Data Tools: Cleanup of page logic. [#36273]
- Invoices: Display full statements with long invoice lists.
- Invoices: Enhanced the PDF generation for statements. [#36713]
- Listviews: Status filters are now case-sensitive. [#36232]
- PDF: Improved font reinstallation. [#36704]
- Permissions: Allow users assigned to contacts to view linked objects even if assign ownership is unchecked. [#36239]
- Users: Make sure assigned users are not removed from contacts upon edit. [#36213]

## [6.4.1] - 2024-02-29
### Changed
- General: Indicate compatibility with WordPress 6.5. [#35820]
- Invoices: Total amount calculation in preview and pdf when refunds or credit notes are applied are back to pre-6.4.0 implementation. [#35569]

### Fixed
- Client Portal: Admin banners are now more consistent across screens. [#35575]
- Client Portal: Catch error if Woo order associated with invoice is deleted. [#35689]
- Invoices: Standardize line item code.
- Invoices: Allow long line item descriptions in email. [#35700]
- Listviews: Object status filters now correctly reflect current status options.
- Listviews: Overhaul of listview filter logic.
- Quotes: Add Draft listview filter. [#35827]
- Segments: Allow floats in all numeric segment conditions. [#36047]
- Segments: Fix output if segment has an error. [#36003]
- Tags: Use existing tags if possible when using helper functions to create objects. [#35738]
- WooSync: Catch PHP error if order has empty fee value. [#35802]
- WooSync: Detect and support WooCommerce HPOS configuration. [#35797]
- WooSync: No longer shows today as renewal date if subscription has no renewal date set.
- WooSync: Modernize code.
- WooSync: Remove broken link from settings page.
- WooSync: Prevent addition of the same site more than once. [#35576]

## [6.4.0] - 2024-01-23
### Added
- Database: Added preliminary support for SQLite. [#34868]
- Settings: Add setting to fine tune the Total Value field calculation for contacts and companies. [#34957]

### Fixed
- Backend: Add fallback for dev site detection. [#34867]
- Contacts: Updated default statuses. [#34892]
- Custom fields: More robust fallbacks for slug creation. [#35175]
- Dashboard: Adjust queries for SQLite compatibility.
- REST API: Allow calls when not using pretty permalinks. [#35201]
- Database: Ensure logs table is initiated with all columns. [#34871]
- Fixed: Escape output in typeaheads. [#35171]
- Invoices: Fixed total amount in preview and pdf when refunds or credit notes are applied. [#34211]
- Jetpack Forms: Detect and process custom date fields correctly.
- Custom fields: Gracefully handle invalid date field data. [#34890]
- Listview: Better output escaping in listviews. [#35140]
- System Assistant: Fix broken links on some tasks.
- Migrations: Fix issue where task_offset_fix migration would not mark as complete on some timezones. [#34873]
- Templates: Ensure file paths are valid before trying to load. [#34949]
- Transactions: Better support for SQLite. [#34868]

## [6.3.2] - 2023-12-19
### Changed
- Settings: Make support document links more consistent. [#34695]

### Fixed
- Segments: Fixed an issue preventing segments from being deleted. [#34690]

## [6.3.1] - 2023-12-14
### Added
- WooSync: New `jpcrm_woo_sync_order_data` hook. [#34212]

### Fixed
- Bulk actions: Stricter permissions checks. [#34586]
- OAuth Connection: Updated typo to remove plural connection"s", and removed doc reference for whitelabel builds. [#34446]
- Placeholders: Fixing quote placeholders on the quote template, client portal, pdf and emails. [#34490]
- Quotes: Consistent rendering of dates in placeholders. [#34490]
- Quotes: Consistent rendering of values and currency in placeholders. [#34490]

## [6.3.0] - 2023-11-15
### Added
- API: Add support for creating transactions with custom fields. [#33645]

### Changed
- Requires PHP 7.4 or higher. [#33806]
- Requires WordPress 6.0 or higher. [#33805]

### Fixed
- API: Allow events endpoint to be filtered by owner. [#33789]
- API: The `create_event` endpoint no longer throws a 100 error. [#33712]
- API: Restrict what owner data is returned with events endpoint. [#33736]
- Backend: Prevent error if OpenSSL functions aren't available in PHP. [#33605]
- Backend: Changing how styles are added to the page on several stand-alone pages to prevent WordPress 6.4 compatibility issues. [#33678]
- Client Portal: Better PHP 8.2 support. [#33740]
- Contacts: Fixed display issues on the Add and Edit pages that occurred when moving fields. [#33762]
- Listviews: Remove legacy code. [#33718]
- Mail Delivery: Removed usage of deprecated function utf8_encode. [#33777]
- Quote Templates: Fix issue with notes field rendering HTML entities in some cases. [#33614]
- Quote Templates: Make sure quote titles with apostrophes do not have backslashes added when rendered. [#33596]
- WooSync: Catch PHP error in Client Portal invoice if WooCommerce is disabled. [#33759]
- WooSync: Contacts can now be assigned to existing companies. [#33711]

## [6.2.0] - 2023-10-11
### Added
- Tests: Add mock globals for testing. [#32755]
- Automations: Add new backend in preparation for future release.

### Changed
- Quotes: Allow admin users to accept quotes. [#32738]
- Tasks: Use consistent language in code. [#33221]
- Increase PHP required version to 7.3. [#33003]
- Updated package dependencies.

### Fixed
- API: Rewrite rules are now flushed after enabling module. [#32901]
- API: Task reminder param is no longer ignored. [#33194]
- Better PHP 8.2 support. [#33421]
- CRM Forms: Removed reference to old branding. [#32903]
- CSV Importer: Fixed assignment to companies by name. [#33097]
- Custom Fields: Corrected bug that prevented new address custom fields from being shown. [#33056]
- Invoices: Handle status translations consistently. [#32909]
- Segments: Fixed error 219 occurring when using date ranges. [#32379]
- Tags: Better slug generation and added tag slug migration. [#33121]
- Tags: Prevent duplicate slugs, and adding more robust slug fallback support. [#33096]
- Tasks: Corrected placeholders for contacts and companies in the task reminder email. [#32375]
- Transactions: Filters now work for custom statuses. [#33476]

## [6.1.0] - 2023-07-24
### Added
- Listing pages: Add a new setting that allows listing pages to utilize the full width of the screen [#31904]

### Changed
- General: indicate full compatibility with the latest version of WordPress, 6.3. [#31910]

### Fixed
- API: Fixed error 200 while saving new api connections [#32003]
- Contacts: Fix bug that prevented the creation of contacts WP user for the Client Portal [#31710]
- Contacts: Fix Filter options not available on the main contacts listing [#31517]
- File Uploads: Fix bug that prevented file uploads from working in environments where the PHP finfo_open function was not available [#31527]
- Menu: Improved alignment for items in the menu [#31846]
- OAuth/Gmail: Fix to enable sending links and images in the email content, supporting text/plain [#31943]
- Segments: Fix bug that prevented dates to be saved in some environments [#31628]

## [6.0.0] - 2023-06-21
### Added
- CRM: Revamped CRM User Interface - Merge the sleek aesthetics of Jetpackâ€™s style, bringing a new level of sophistication and seamless navigation to your CRM experience [#30916]
- API: Now it retrieves contacts with tags [#31418]
- Contacts: Allow unsubscribe flag to be removed [#31029]

### Changed
- User roles: Further restricted capabilities on some roles [#31174]
- Contacts: Use sha256 instead of md5 for gravatar images [#31288]

### Fixed
- Client Portal: Fix a fatal error initializing endpoints and shortcodes [#30678]
- CRM: Fix new lines display in quote templates [#30974]
- CRM: Fix whitelabel bug with full menu layout [#31126]
- CRM: Page layout now has a max width of 1551px [#30961]
- CRM: Welcome tour now goes through all steps [#31178]
- Extensions: Catch PHP notice if offline [#31032]
- Invoices: Show assigned contact/company link [#31153]
- Listview: Per-page settings no longer reset
- Listview: PHP notice no longer shows when saving settings [#31154]
- Quotes: Fix sort by status [#31087]
- White label: JPCRM support and resources pages no longer show [#31155]

## [5.8.0] - 2023-05-18
### Added
- Composer: Added jetpack-forms as a required dependency to fix a Jetpack form compat issue [#30749]
- Segments: Adding a doesnotcontain condition for email segments, for better compatibility with Advanced Segments [#30422]

### Changed
- Code cleanup: Cleaning up WP Editor helper functions and wp_editor usage [#30306]
- General: Update link references to releases in changelog [#30634]
- Navigation: Changed Learn More button and Learn More link to be consistent with Jetpack styles [#30135]
- PDF generator: Objects in filenames are translated [#30295]
- WooSync: Improved status mapping logic [#30557]

### Fixed
- Companies: Fix company name prefill so add links - transaction, invoice and tasks - prefill company name [#30752]
- Contact / Company: Fix date styling for transactions, invoices and quotes [#30483]
- Contact / Company: Profile summary total value and invoice count now removes deleted invoices [#30178]
- Custom fields: Use native date pickers [#30643]
- Quotes: Use native date pickers [#30643]
- Export: Contact segments now export company info [#30393]
- Logs: Facebook, Twitter, Feedback, and Other Contact log types now update last contacted timestamp [#30470]
- Settings: Eliminate orphaned references to custom fields within field sorting settings when removing custom fields [#30114]
- Segments: Make sure total count is updated on tag changes [#30638]
- Tasks: Start and end times now show correctly throughout the CRM [#30431]
- Tasks: New migration to remove timezone offset from database [#30431]
- Tasks: Removed reliance on strftime for better PHP 8.1 compatibility [#30431]
- Tasks: Switch to native browser date and time inputs [#30431]
- Tasks: Catch moment.js notice due to using fallback date format [#30431]
- Tasks: Fix ##TASK-BODY## placeholder [#30431]
- Tooling: Allowing minification of JS files in development [#30119]
- Transactions: Always show current status in editor [#30644]
- WooSync: Fix the fee amount from a WooCommerce order is not added to the invoice [#29650]
- WooSync: Fix shipping tax and discount amounts from Woocommerce orders are not calculated in invoices [#29650]
- WooSync: Fix the subtotal amount from WooCommerce orders is not calculated in invoices [#29650]
- WooSync: Fix PHP Warning [#30572]
- Invoices: On invoice update the shipping tax selected is removed resulting on incorrect total amount [#29650]

## [5.7.0] - 2023-04-19
### Added
- Menus: Add back to list button on add and edit pages for companies, transactions, invoices, and quotes [#29999]
- Settings: Remove 'Restore default settings' from the General Settings page, add to settings page menu [#29999]
- Support Page: Add new support page for customers to submit support requests [#29545]

### Changed
- API: Add optional parameter to the API to set the external service name, and replace hyphens from the json response to underscores [#29316]
- Companies: Move status select from Actions to main edit section underneath ID [#29999]
- Contacts: Change location of save button and add Contact Actions metabox for contacts [#29999]
- Onboarding: Change onboarding wizard company name description to remove 'as shown below' [#29999]
- Quotes: Move Quote Status underneath Quote ID [#29999]
- Menus: Swap the stacked logo to the horizontal one [#30092]
- CSV Importer: Various UI/UX tweaks [#29851]
- Dashboard: Align the Latest Contacts and Revenue Chart buttons [#29999]
- Dashboard: Make spacing between panels more consistent [#29999]
- Invoices: Fix overflow issue in the edit invoice page [#29999]
- Invoices: Move status select HTML from Invoice Actions to main edit section under ID [#29999]
- OAuth: Dependencies are now downloaded to wp-content/jpcrm-storage/packages [#29734]
- Onboarding: Make all hint styles consistent [#29999]
- Transactions: Change location of import sub-menu item when CSV Pro is installed and active [#29999]
- Transactions: Move status select HTML from Transaction Actions to main edit section underneath ID [#29999]

### Removed
- Onboarding: Remove company name preview from onboarding wizard [#29999]

### Fixed
- UI: Change fonts to smaller size, and different font family [#29999]
- UI: Change form placeholder colors to a lighter shade of gray [#29999]
- Contacts: Fix 403 error if file was uploaded via Client Portal Pro using Apache web server [#29969]
- Menus: Remove border from top menu [#29999]
- Dashboard: Adjustments to first-use modals [#30065]
- Dashboard: Various fixes for the sales funnel [#29995]
- Email: Caught PHP notices if recipient was deleted [#29747]
- Exports: Catch PHP notice when exporting a subset of objects [#30111]
- UI: Fix content overflowing in contact view page [#29999]
- Support: Fix the Give Feedback link so that it sends to the reviews page on .org [#29873]
- General: Fix various corrupt JS files [#29705]
- Onboarding: Get updates (mailing list) changed from opt-out to opt-in in the onboarding wizard [#29999]
- Importer: Allow import of application/csv mime type
  Importer: Better parsing of CSV fields [#29822]
- General: Improved compatibility with PHP 8.1 [#29945]
- Invoices: Fix ability to remove logo from invoice edit page [#30099]
- Invoices: Fix PHP notice when sending contact an invoice via email [#30110]
- General: Fix broken link in bulk actions function in list view [#29623]
- Mailpoet Sync: Fix an issue where contact images would disappear after synchronization [#30091]
- Onboarding: Remove outdated YouTube video from welcome overlay [#29999]
- Quotes: Use current date if quote date is blank [#30032]
- Settings: Fix broken link on white label installs [#30160]
- Settings: Allow new tax rates to be added [#29938]
- Onboarding: Usage tracking changed from opt-out to opt-in in the onboarding wizard [#29999]
- WooSync: Tag existing contacts with new orders [#30107]

## [5.6.0] - 2023-03-23
### Changed
- Contacts: Change customer references to contact in all but Woo and commerce contexts [#29267]
- Compatibility: Indicate full compatibility with the latest version of WordPress, 6.2 [#29341]
- Move all files that were inside the zbscrm-store folder with a flat structure to the new jpcrm-storage folder that uses a hierarchical structure [#28350]
- Extensions: Highlight popular Woo extensions on extensions page, plus alphabetize results [#29199]

### Fixed
- Add a missing < which prevented a script tag from being opened. [#28834]
- Allowing XMLRPC and REST requests when the frontend is disabled [#28970]
- Client Portal: Fix bug that prevented access from being disabled using the contact page [#28675]
- Client Portal: Fix numeric fields, date fields, and textareas in the Client Portal [#28796]
- Change escape function for API generated activity [#29146]
- Contacts: Prevent JS error when custom avatars are not enabled [#29086]
- Contacts: Fix PHP error when using empty values for Address Custom Field (Date) [#29249]
- Contacts: Fix a contact field issue when a Woo order subscription is updated [#28800]
- Contacts: Fix avatar getting removed when saving a contact [#28829]
- Contacts: Fix escape in contact list filters [#28836]
- Contacts: Fix issue where exporting contacts shows "County" when it should show "State" [#28868]
- Contacts: Fix the escape used in the "Bundle holder" notification when uploading files to a contact [#28831]
- Dashboard:  Allow custom profile pictures to be shown in the dashboard [#28802]
- Invoices: Escape an invoice ID in ZeroBSCRM.admin.invoicebuilder.js [#28830]
- Tasks: Correct text where tasks where being referred to as events [#29267]
- Placeholders: Fix secondary address placeholders [#29396]
- Placeholders: Fix several placeholders throughout CRM [#29361]
- Placeholders: Fix minor admin only issue on placeholder fields [#28811]
- Exports: Fix some export cases by adding a check for the segment index [#29482]
- Taxes: Fix tax page deletion for single entries [#29227]
- Taxes: Fix tax rate creation link on tax rate settings page [#29209]
- Forms: Swapping edit and new form titles to correctly reflect page [#29274]
- Dashboard: Show default avatar under activity, when contact image mode set to none [#29067]
- Client Portal: Fix accept quote in Client Portal button not working for PHP versions 8.1 and up [#29055]
- Taxes: Fix potential XSS in the Tax Settings page [#29215]
- Contacts: Fix wrong naming from Customer ID to Contact ID in the Edit Contact page [#29267]
- Contacts: Importing contacts using CSV files no longer erases fields that are missing [#28886]
- Client Portal: Background for the menu in the Twenty Seventeen theme is no longer dark gray [#29052]
- OAuth Connections: No longer shows critical error after saving credentials [#29059]
- WooSync: Remove PHP notice when a WooCommerce order is in a Draft status [#29099]
- Segments: Fix list pagination [#29004]
- Fix special characters in textarea fields (contacts, transactions, quotes) to prevent producing visible HTML entities [#28941]
- WooSync: Change status only for contacts with the Lead status [#28908]

## 5.5.3 - 2023-01-26
- Fixed: CRM no longer breaks WordPress sites running on PHP 7.2
- Fixed: HTML escaped code in contact list filters for segments

## 5.5.2 - 2023-01-25
- Fixed: Custom profile images are now shown in the Latest Contacts dashboard
- Fixed: Potential XSS in the Custom Fields setting page
- Fixed: Custom profile pictures are no longer removed when updating contacts
- Fixed: Potential XSS in invoices with manual input references
- Fixed: Code snippet was removed from the top of the Forms new/edit page
- Fixed: Remove HTML code in the "Bundle holder" notification when uploading files to a contact
- Fixed: HTML escaped code in contact list filters for segments
- Fixed: Improved security regarding filenames for uploaded files
- Fixed: The creation date for contacts is updated on any WooCommerce subscription event
- Improved: Added translation for contact fields when exporting contacts
- Improved: Added Invoice Status to PDF Invoice template
- Added: Export Segments to .CSV
- Added: WooCommerce order status mapping to transaction status
- Added: WooCommerce order status mapping to invoice status

## 5.5.1 - 2022-12-16
- Fixed: Inline field editing no longer prevents listings from being displayed
- Improved: Security around phone numbers viewing
- Improved: Added a migration to remove outdated AKA lines

## 5.5.0 - 2022-12-13
- Fixed: negative and zero-balance invoices now show tax subtotals when applicable
- Fixed: Bug where core field conditions Status and Email didn't translate well between Advanced Segments and core Segments.
- Fixed: WooSync removing contact fields while syncing
- Fixed: Empty index.html files are now being added to contacts folders to prevent directory listing
- Fixed: Date and datetime picker issue in Segmentation
- Fixed: Incorrect total value shown for contacts when invoices were deleted
- Fixed: Added missing custom fields in WooCommerce's My Account when using WooSync
- Fixed: Segment editor bugs around some Advanced Segment conditions
- Fixed: Properly delete associated aka (aliases) when deleting contact
- Fixed: Security improvement to prevent XSS attacks escaping output HTML
- Fixed: Reference error which was blocking custom date field editing.
- Fixed: Bug where by some migrations were not finishing
- Fixed: "Your tasks" link now properly filters to your tasks
- Improved: caught PHP warning when creating a new contact with navigation mode enabled
- Improved: one can select "none" for shipping tax rate when editing transactions
- Improved: Refactored date and datetime picker logic to be more robust
- Improved: Segment conditions now have proper positioning and categorisation
- Improved: Styling in Segment editor with the recent addition of lots of new conditions
- Improved: Files for companies, invoices, and quotes are now stored in separate folders
- Improved: Security around Email viewing
- Improved: contact profile activity timeline properly renders newlines
- Improved: custom date fields now have additional _DATETIME_STR and _DATE_STR placeholders
- Improved: default fonts are now bundled with the core plugin
- Improved: Hardened security around CRM client portal account privileges
- Improved: Hardened security against admin-side file uploading
- Improved: Migration system now has multi-load-point potential.
- Improved: cleaned up incorrect/broken learn links
- Added: MailPoet Sync module (Import MailPoet Subscribers into CRM Contacts)
- Added: Export CRM Segment to MailPoet Subscriber list functionality
- Added: MailPoet Contact List View Filter
- Added: Autologging of MailPoet Subscriber changes on contact
- Added: MailPoet Contact View information tab
- Added: Custom profile pictures for contacts now use a new field
- Added: Migration to correct incorrect errors for custom field based Segment Conditions

## 5.4.4 - 2022-11-14
- Fixed: prevent edge case where folder creation may overwrite file
- Fixed: cleaned up unneeded files in plugin zip
- Fixed: System Status sometimes didn't detect default font as installed
- Improved: extra fonts now persist between updates
- Improved: consistent menu order between menu modes
- Improved: allow style attributes on more HTML elements in quote templates
- Improved: Segment condition inputs are now type-aware

## 5.4.3 - 2022-11-10
- Fixed: uploaded files could not be accessed when using Apache
- Fixed: 500 error visiting Client Portal invoices page if logged out and easy-access disabled
- Fixed: transaction date fields properly show timezone offsets
- Improved: custom WP date and time formats no longer cause errors when editing transactions
- Improved: redirect to Client Portal login instead of error if accessing an invoice object URL when logged out and easy-access disabled
- Improved: hardened security
- Added: File listing tab in the contact's page now shows information about who an when a file was uploaded
- Added: transaction paid and completed date fields now allow manual adjustment of time data
- Added: transaction editor now uses native browser date and time inputs

## 5.4.2 - 2022-11-02
- Fixed: Bug in 5.4 which was giving PDF generation a hiccup
- Fixed: Bug in WooSync where customer notes were not being added
- Fixed: Added a workaround for varying encryption cipher support
- Improved: HTML in contact logs now displays properly in the contact single view Activity Log
- Improved: Allow more common-sense HTML elements in Quote Templating

## 5.4.1 - 2022-10-27
- Fixed: catch migration error when using PHP 8
- Fixed: catch migration error when using non-default table prefixes

## 5.4.0 - 2022-10-26
- Fixed: Bug in tax table management where duplications could be added
- Fixed: Bug where WooSync would not make new invoices for orders where order id and Invoice id collided
- Fixed: Bug where by WooSync duplicate customer note logs
- Fixed: Error when accessing Client Portal settings when Client Portal is disabled
- Fixed: transaction type is properly imported with WooSync
- Fixed: error if using old database servers when searching contacts
- Fixed: caught PHP notices when checking for existing object metadata
- Fixed: transactions excluded from calculated totals now show a zero value in invoice partials
- Fixed: one can again regenerate API credentials when using PHP 8
- Fixed: allowed some previously-translatable text to be translated again
- Fixed: calculated tax works with negative invoice line items
- Fixed: Email file attachments (invoices) don't work with Gmail sender method
- Fixed: Style glitch for Payment rows in Invoice Totals table (PDF)
- Fixed: database index tried to add twice on new installs
- Fixed: Segment conditions for custom fields now respect the custom field type when using Advanced Segments
- Fixed: Bug in segmentation logic which effected Advanced Segments 'date added' condition.
- Improved: WooSync now follows WooCommerce tax code usage
- Improved: Database access layer around the storage of log metadata
- Improved: Segment preview audiences are now linked to profiles
- Improved: CSV filenames are now hashed during import for better security
- Improved: numeric custom fields now allow negatives
- Improved: better backend support when uploading files to contacts
- Improved: Updated PDF generation library to latest version
- Improved: Hardened PDF generation routine against local file exposure
- Improved: Segment previews now show randomised contacts.
- Improved: Hardened file checks in CSV Importer
- Improved: Segment condition 'Date range' has been split into 'Date range' and 'Datetime range'
- Improved: wrap more strings for translation
- Added: Ability to Pin and Unpin important logs from a contact
- Added: Segment editor now supports condition categories and descriptions.
- Added: New feature: Totals tables to contact list view
- Added: new "jpcrm_client_portal_after_save_details" hook
- Added: Segment condition type: Variable date windows (e.g. within the past _ days, or in the next _ days)
- Added: Segment condition type: Numeric >=
- Added: Segment condition type: Numeric <=
- Added: Segment condition type: String "Does not contain (!*)"
- Added: Segment condition type: Date >=
- Added: Segment condition type: Date <=

## 5.3.1 - 2022-09-29
- Fixed: PHP notice in WooSync syncing
- Fixed: zbs_end_emails_ui hook sometimes fired twice
- Fixed: error when listing contact or company files
- Improved: Increased reliability of lost-connection notifications in WooSync

## 5.3.0 - 2022-09-28
- Fixed: WooSync properly maps the "On hold" transaction status
- Fixed: custom date fields now work correctly under WooCommerce My Account
- Fixed: Client Portal is now properly aligned when using the Twenty Twenty theme
- Fixed: catch an edge-case API error when no results are found
- Fixed: invoice exports no longer give PHP errors
- Fixed: "Powered by" messaging now consistently respects its setting
- Fixed: "Older than X days" filter works again
- Fixed: reCaptcha form settings are no longer reset
- Fixed: "Select All" button on export page now works
- Fixed: sort by total value sometimes gave an error
- Fixed: uploaded files could not be accessed when using Apache
- Fixed: "My Invoices" link in WooCommerce My Account no longer triggers an error
- Fixed: plain permalinks can now be used with the Client Portal
- Fixed: "Thank You" page from Client Portal is now accessible when using easy-access links
- Fixed: escape translated apostrophes in client portal metabox
- Fixed: PHP notice on task manager when not an admin
- Fixed: segment editor shows correct match type
- Fixed: quotes and invoices in the Client Portal now respect theme colors
- Fixed: custom permalinks no longer break the Client Portal
- Fixed: various security fixes
- Improved: better handling of HTML-encoded content on export
- Improved: Refined the way we protect sensitive data storage
- Improved: removed unused legacy API files
- Improved: renamed undocumented "api_status" endpoint to "status"
- Improved: better handling of relative date output
- Improved: show correct dates in invoices despite timezone variations
- Improved: consolidated various "Powered by" settings into two general settings
- Improved: deleted contacts no longer generate PHP notices in email manager
- Improved: better performance on large sites
- Improved: better API error handling
- Improved: prevent exporting an object type if there are no objects to export
- Improved: API secret is now hashed upon generation for better security
- Improved: new API credentials have "jpcrm_" prefix
- Improved: CRM-only menu choice during welcome wizard no longer enables full WP override setting
- Improved: better messaging when generating a WP user fails
- Improved: prevent saving an invalid email to a contact
- Improved: tweaks to list view settings UX
- Improved: refined messaging on WooSync hub page around paused sites
- Improved: performance boosts to WooSync for large sites
- Improved: removed JS error from console when on the dashboard
- Improved: replaced outdated feedback page with CRM Resources page
- Improved: contacts created via WooSync are now assigned to a company if specified
- Added: custom date fields now show on the Client Portal
- Added: get CRM version info with the "status" endpoint
- Added: invoice list view now has "date" and "due date" columns
- Added: new backend webhook system via API
- Added: new setting to disable WooSync order status mapping
- Added: optional transaction status column in the Client Portal
- Added: "jpcrm_after_contact_update" and "jpcrm_after_contact_insert" hooks

## 5.2.0 - 2022-08-11
- Fixed: bug in Segments which would sometimes block multi-field querying of the same field
- Fixed: Custom CRM Header link was resulting in a broken link
- Fixed: error while sending e-mails when the Client Portal module is disabled
- Fixed: external source record lines are now properly removed on object deletion
- Fixed: invoices updated by WooSync retain their logo
- Fixed: listviews wouldn't load if tags had improperly-encoded characters
- Fixed: local Woo order hooks are ignored if local connection is not active
- Fixed: WooCommerce order linetime prices were incorrectly mapped to the CRM invoice in some cases
- Fixed: WooCommerce order updates didn't always update the associated CRM invoice
- Fixed: WooSync and GiveWP no longer overwrite the WP user ID link in the database
- Fixed: WooSync now properly sets the contact status
- Fixed: Zapier logic was not loaded properly
- Improved: better PHP 8 compatibility
- Improved: if a GiveWP donation has a date available the CRM will import a transaction using that date
- Improved: invoices missing easy-access hashes will regenerate one when saving in the invoice editor
- Improved: menus items should now load in a consistent order no matter the menu mode
- Improved: refactor of Client Portal backend code
- Improved: refinements to mail delivery setup wizard
- Improved: removed old dompdf library
- Improved: switching between tabs in the System Assistant page now updates the URL
- Improved: visual tweaks and refinements
- Improved: WooSync now connects to external stores via authentication dialog, rather than credentials (simplified)
- Added: increased minimum PHP version to 7.2
- Added: CRM settings are now found in the Jetpack CRM menu
- Added: Gmail via API as a mail delivery method
- Added: OAuth 2.0 Connection support for Google
- Added: Package Installer to support sideloading of larger dependencies
- Added: WooSync can now synchronise data from multiple WooCommerce stores into one CRM instance
- Added: WooSync now has 'pause sync' mode per store connection

## 5.1.0 - 2022-06-30
- Fixed: unpaid/uncompleted transactions imported from Woo now show a blank completed/paid date
- Fixed: orders could be skipped if they didn't exist during partial order page retrieval
- Fixed: domain field in WooSync settings no longer shows 0 if blank
- Fixed: WooSync connection settings did not toggle visibility properly in some cases
- Fixed: WooSync now correctly reports partial percentage of pages completed
- Fixed: second address custom fields can now be used as columns in a list view
- Fixed: second address label is now properly used throughout the CRM
- Fixed: orders from external sites were sometimes not synced
- Fixed: data imported from GiveWP now adds to existing tags instead of replacing them
- Fixed: the Client Portal page can now be set as the homepage
- Improved: transaction statuses imported from Woo are now properly shown when editing a transaction
- Improved: 0% tax rates are now possible
- Improved: better translation support on tax settings page
- Improved: ensures the zbs_end_emails_ui action fires on the single email page
- Improved: WooSync hub now syncs latest data on load
- Improved: better translation support for second address fields
- Improved: catch a PHP notice when processing a Jetpack contact form
- Improved: WooSync Hub stats automatically update during AJAX sync
- Improved: The transaction listing in the Client Portal now shows the transaction status
- Added: WooSync Hub now supports syncing orders that have a custom number structure
- Added: new _DATETIME_STR and _DATE_STR placeholders based on unix timestamp values

## 5.0.1 - 2022-06-05
- Fixed: emails properly send when a quote is accepted
- Fixed: catch Woo API headers when server maps them to lowercase keys
- Fixed: catch division by zero error in Woo edge cases
- Improved: removal of legacy code
- Improved: contact placeholders can now be used in system email templates
- Improved: update link to Woo learn content
- Improved: better handling of larger numbers in WooSync hub

## 5.0.0 - 2022-05-25
- Fixed: Contact/company creation logs now show more useful data when created from external source.
- Fixed: Bug where in some external site syncing situations external sources were duplicated in WooSync
- Fixed: Segment date range outputs correctly when editing
- Fixed: WooCommerce Bookings from the current day are now correctly listed.
- Fixed: Database query filter bug around external source retrieval
- Fixed: Contact names now show on company list view when contact image mode is set to none
- Fixed: Caught PHP notice when regenerating API keys
- Improved: External source system now records 'origin' (Domain) for external sources.
- Improved: WooSync now records domain origins for Synced orders and customers.
- Improved: Expanded DAL to allow additive tagging.
- Improved: External source system now displays grouped by source, with clearer UI.
- Improved: Added support so that Advanced Segments can segment by External Source
- Improved: WooSync now stores Order ID above Post ID.
- Improved: Refined query engine surrounding setting retrievals
- Improved: WooCommerce integration performance
- Improved: Cleanup of white label code
- Improved: Refund transaction support improved throughout.
- Improved: Increases the interval of the WooSync cron job
- Improved: Increases the number of Woo orders retrieved per page
- Improved: Local WooCommerce order trashing and deleting are now caught by WooSync Sync.
- Improved: Add a notice to not allow to reactivate WooSync extension in Jetpack CRM v5+
- Improved: Reduced amount of migrations, unified, simplified, optimised!
- Improved: Brought base data model up to date with v3.0 DAL for fresh installs
- Improved: Core CRM modules now have autoloading.
- Added: WooSync module is now bundled in the core!
- Added: WooSync module can now be enabled in welcome wizard
- Added: Two new segment conditions, "Is WooCommerce Customer" and "WooCommerce Order Count".
- Added: Added filter bar button "Woo Customer".
- Added: System Assistant steps for the Woo module
- Added: Automatic switching routine to let WooSync core module seamlessly replace the Extension variant.
- Added: Update link to go to Woo hub from first use dashboard
- Added: Support for new WooCommerce related Advanced Segments
- Added: Support for WooCommerce Checkout Field Editor fields in WooSync
- Added: Support for WooCommerce Checkout Add-Ons in WooSync
- Added: Support for Checkout Field Editor (Checkout Manager) for WooCommerce
- Added: New Quick Filter: Invoice from WooCommerce
- Added: New Quick Filter: Transaction from WooCommerce
- Added: Email and name changes made on WooCommerce My Account are now reflected against attached contacts.
- Added: Email and name changes made on WordPress profile edits are now reflected against attached contacts.
- Added: Support for WooCommerce refunds

## 4.11.0 - 2022-04-21
- Fixed: WP users are now consistently created if "Generate WP User" is selected
- Fixed: Client Portal width in the Twenty Twenty-Two theme
- Fixed: Broken link on activating CRM API
- Fixed: Invoice labels now display properly on PDFs and on portal invoices
- Fixed: one can again send an invoice to the email of choice
- Fixed: DB migration collision
- Improved: prevent upload folder directory listing on misconfigured web servers
- Improved: learn menu code tweaks
- Improved: set the transaction paid completed" dates to match transaction date if not specified in the transaction editor
- Improved: redirect CRM contacts to client portal after login at /wp-admin/
- Improved: better client portal password reset flow
- Improved: better Zapier search support
- Improved: dashboard revenue chart is fully based on transaction date instead of transaction date paid
- Improved: wrapped a few more strings for translation
- Improved: prevent WP button text from being changed in edge cases
- Added: new "api_status" API endpoint to verify credentials
- Added: You can now display Invoice custom fields on invoice PDFs and portal invoices.
- Added: You can now display Contact/Company custom fields on invoice PDFs and portal invoices.
- Added: Preparations for v5.0 major release

## 4.10.3 - 2022-03-30
- Fixed: transaction list doesn't work on sites with unexpected table prefixes.
- Fixed: Issue installing the plugin via XML-RPC request.
- Improved: move welcome tour behind first use dashboard modal.

## 4.10.2 - 2022-03-28
- Fixed: issue installing the plugin via WP-CLI command line
- Fixed: updates now show consistently
- Fixed: some menus did not load on white label installs

## 4.10.1 - 2022-03-25
- Fixed: Error on new first use dashboard
- Fixed: Incompatibility with PHP versions prior to 7.3
- Improved: better compatibility with block-based themes

## 4.10.0 - 2022-03-24
- Fixed: quotes can now be accepted in block-based themes
- Fixed: prevent a JS error when TinyMCE is used by another plugin
- Fixed: edit user-created logs when created in another language
- Improved: Styling around admin notices on various pages
- Improved: support addition of tags via Jetpack contact form block's checkbox group
- Improved: removed references to non-existent asset maps
- Improved: Refactored learn menu system
- Improved: Updated Noto fonts to provide more global character support
- Improved: Added new settings page: Locale
- Improved: string cleanup
- Improved: extension update detection code
- Improved: handle null transaction names
- Improved: better WP user creation logic
- Improved: catch PHP notice when creating a contact from Jetpack Forms
- Improved: caught PHP notice that sometimes occurred within built-in forms
- Improved: catch PHP notices when saving logs
- Added: Transaction list can now show External Source column
- Added: Include external source ID when searching transactions
- Added: Ability to install region-specific fonts for PDFs
- Added: New first-use dashboard to better welcome new users
- Added: WooCommerce variant of first use dashboard
- Added: Content to learn menus, including video guides

## 4.9.1 - 2022-02-22
- Improved: Better compatibility with Jetpack plugin

## 4.9.0 - 2022-02-16
- Fixed: Wording for Client Portal is now consistent
- Fixed: error when creating WooCommerce orders with PHP 8.x
- Fixed: catch PHP notice when adding a new contact
- Improved: contacts can now be unassigned
- Improved: discoverability of core CRM modules
- Improved: handle long file titles and descriptions
- Improved: fix import icon on contact menu
- Improved: prevent Jetpack "Add Contact Form" button from showing on quote pages
- Improved: Client Portal tab in contact view was moved to sidebar
- Improved: cleaned up client portal permissions code
- Added: "Assigned to Me" and "Not Assigned" filters for contacts
- Added: further support for Mail Campaigns imminent release
- Added: cron monitoring system to keep the cron jobs alive
- Added: better compatibility for installation via Jetpack

## 4.8.1 - 2022-01-20
- Fixed segment compilation error if using a segment condition that was no longer available

## 4.8.0 - 2022-01-20
- Fixed: bug when apostrophes are present in the business name while sending emails
- Fixed: contact ownership wasn't properly set when creating or updating a contact via the API
- Fixed: cron jobs were not being properly deleted on deactivation
- Fixed: Removed faulty character
- Fixed: setting deletion function
- Improved: better API error messaging
- Improved: newlines are preserved in new emails sent from the Email Manager
- Improved: summary boxes now show in the dashboard if there are no contacts
- Improved: prevent errors if there are duplicate meta keys for a contact
- Improved: transactions created via the API now have a transaction date
- Improved: messaging around Client Portal Pro contact files updated for several scenarios
- Improved: segment failsafes for code extensions such as Advanced Segments
- Improved: UI for the Client Portal is now responsive
- Improved: WP 5.9 compatibility


## 4.7.0 - 2021-12-16
- Fixed: catch error if list view has no filter buttons
- Fixed: pagination didn't update when changing listview settings
- Fixed: second address fields in client portal now save properly
- Improved: show "access restricted" message when one has no access to said object
- Improved: using Safari to send email now works as expected
- Improved: legacy "Auto-draft Garbage Collection" no longer shows on System Status page
- Improved: User Profile page improvements
- Improved: contact edit layout now shows properly if addresses are show last
- Added: pagination and bulk actions now show at the top of listviews

## 4.6.0 - 2021-11-18
- Fixed: non-hidden fields can be blanked from the Client Portal
- Fixed: hidden fields cannot be changed from the Client Portal
- Fixed: all placeholders now work if WP is set to another language
- Fixed: the client portal button placeholder works properly in manually-sent invoice and quote emails
- Fixed: white label sites no longer have a PHP error
- Improved: better cache-busting for JS/CSS files
- Improved: better handling of avatar settings
- Improved: Segment conditions are more reliably respected when building segment counts
- Improved: Support for placeholders in single send emails.
- Improved: better logging when a customer updates details from the Client Portal
- Improved: log types for disabled modules no longer show when adding logs
- Improved: HTML string cleanup
- Improved: placeholder replacement order in single-send emails
- Improved: show contact IDs when merging contact records
- Improved: more robust rewrite rule handling of invoices in the client portal
- Improved: clean up PHP debug code
- Added: check for mb_internal_encoding support

## 4.5.0 - 2021-10-20
- Fixed: Resolves occasional error when sending emails via Email Manager
- Fixed: Sending emails sometimes had extra newlines
- Fixed: reCaptcha on built-in forms wasn't properly working
- Fixed: Custom field settings could overwrite themselves in rare cases
- Fixed: Bug where users could not clear tags against objects.
- Fixed: Updated some WooCommerce doc broken links.
- Fixed: Calendar shows the newer events first (with a 50000 limit)
- Improved: Email Manager messaging tweaks
- Improved: Custom field settings now hide when their module is disabled
- Improved: Cleaned up boxes on the dashboard
- Improved: Refinements to segment caching routines
- Improved: Added more translation support
- Improved: Refinements to single quote client portal page, and other refactoring around templates
- Improved: Moved main email template into templating system (can now be modified via theme file)
- Improved: Added security to templates directory to avoid any possible external indexing
- Improved: Welcome to Client Portal email now supports ##ASSIGNED-TO-EMAIL## etc.
- Added: Show assigned user on contact profile
- Added: New GiveWP core module
- Added: Support for file templates for Invoices, Quotes, and Statements (PDFs)

## 4.4.0 - 2021-09-24
- Fixed: Bug where email template test emails were being sent blank
- Fixed: Cleaned up some PHP notices in the client portal
- Fixed: removed obscure and long-broken setting
- Fixed: Some steps in the welcome tour are not working well
- Fixed: Now Client Portal supports multi slug levels
- Improved: Better messaging on licensing page
- Improved: Add link to task list view on task edit page
- Improved: Wrapped some missed strings for translation
- Improved: Better compatibility with WordPress.com menus
- Improved: File cleanup
- Improved: More strings are available for translation
- Improved: Added better support to custom field creation to avoid key name collisions
- Improved: Better handling of form custom fields
- Improved: Small design tweaks
- Improved: backend translation updates
- Added: New system-wide placeholder system
- Added: New System Assistant page
- Added: Placeholder map reference page

## 4.3.1 - 2021-09-03
- Improved: Some promo banners

## 4.3.0 - 2021-08-25
- Fixed: You are now able to load more than 100 calendar items per page load.
- Fixed: Contact edit link icon.
- Fixed: cleaned up PHP notice when exporting linked objects.
- Fixed: the company column in the contact list view is no longer truncated.
- Fixed: Tweaked previous invoice security fix code.
- Improved: use fallback text in invoices and transactions if contact has no name or email.
- Improved: subtotal column widths are now consistent.
- Improved: items can now be unassigned after a previous assignment.
- Improved: image alt attributes on the extensions page now show properly.
- Improved: Some welcome copy and pics.
- Improved: Removed some unused images.
- Improved: one can now set date custom fields more than 5 years in the future.
- Added: Tasks can now be viewed in a list view as well as calendar view.
- Added: Task bulk actions: add/remove tags, update status, delete.
- Added: Task quick filters: next 7 days, past 7 days, incomplete, complete, etc.
- Added: update contact status in bulk.
- Added: The changelog.txt file with the full release changes.
- Added: Track usage and CRM stats to help us develop features in the most used areas of the CRM.
- Added: the percent discount now shows on invoices when applicable.

## 4.2.3 - 2021-08-11
- Fixed: Invoices and Invoice list not shown on my account unless assigned to you.

## 4.2.2 - 2021-08-09
- Fixed: Hotfix for bug introduced in 4.2.0 with regards tag editing against contacts.

## 4.2.1 - 2021-08-05
- Fixed: Invoices cannot be sent to the assignment contact email.

## 4.2.0 - 2021-08-04
- Fixed: the welcome wizard respects which extensions were selected
- Fixed: invoice lineitem descriptions have newlines preserved
- Fixed: editing contacts assigned to another user is restricted if "Assign Ownership" setting is disabled
- Improved: Cleaned up HTML validation
- Improved: better handling of contacts with no name or email
- Improved: use default quote template values if quote field is empty
- Improved: active core extensions will remain active on refresh
- Improved: cleaned up PHP notice when creating forms
- Improved: cleaned up deprecated jQuery code
- Improved: datepickers now respect WP's "week starts on" setting
- Improved: better Client Portal support for the default Twenty Twenty-One theme
- Improved: Added client portal dialog to contacts without emails in contact view mode
- Improved: Linked object fields can now be exported for Contacts, Quotes, Invoices, and Transactions
- Improved: the "perpage" and "page" params are now available at all relevant API endpoints (customers, companies, transactions, invoices, quotes, customer_search, events)
- Improved: show transaction name on the contact profile page
- Improved: hide total value on contact and company profile when transactions and invoices are disabled
- Improved: DAL improvements allow passing of generic tag_input
- Improved: links are detected in custom text fields
- Added: quick links to create new items from the document tabs
- Added: navigation mode now applies to companies as well as contacts

## 4.1.0 - 2021-07-08
- Fixed: Contact second address custom fields now show in View mode
- Fixed: Display second address if first address is empty
- Fixed: Company custom fields will now always show in View mode
- Fixed: Hide company settings when B2B mode is disabled
- Fixed: The jpcrm_quote_accepted hook works with the quote editor too and not only via Client Portal
- Fixed: The /events API endpoint returns events
- Fixed: Hide Companies section in non-Slimline menu layouts
- Fixed: Don't allow quote template builder to run if customer isn't selected
- Fixed: Contact logs could show doubled in some cases
- Fixed: The "show prefix" setting is now respected when editing contacts
- Fixed: Events now properly show in day and week view
- Improved: Cleaned up PHP warnings related to list view filters
- Improved: Text wrapping in contact and company fields
- Improved: Removed unneeded JS files
- Improved: Contact prefixes and countries can be unset
- Improved: better handling of very long tags
- Improved: CRM deprecation notices are now logged
- Improved: Wrapped some missed strings in __() for translation
- Improved: Blank custom fields now show correctly when viewing a contact profile
- Improved: Search by phone will ignore spaces and common punctuation
- Improved: Typeahead limit has been raised from 5 to 10

## 4.0.17 - 2021-06-24
- Fixed: An internal variable naming for DAL version 2
- Fixed: No break lines in PDF quotes.
- Fixed: Country field is not showing on company address
- Improved: all pages should have titles now

## 4.0.16 - 2021-05-25
- Fixed: Updated PDF library that fixes some issues with the pdf of quotes and invoices using PHP 8
- Improved: Some text banners and buttons

## 4.0.15 - 2021-04-09
- Fixed: Invoice client portal was incorrectly saving the invoice total
- Fixed: Country field is not showing on contact cards
- Fixed: Item selector for invoicing, with long names have a UI issue
- Improved: A better alert message when a user tries to create an invoice with a duplicated reference
- Added: A notice block for announcements.

## 4.0.14 - 2021-03-12
- Fixed: An issue with the set_time_limit in some shared hosts.
- Improved: The CRM dashboard view with date ranges.
- Tested: Tested with WordPress 5.7

## 4.0.13 - 2021-02-25
- Fixed: Added date column in the contact list is using UTC time.
- Fixed: Add a link to the contact ID column in the contact list.
- Fixed: WooCommerce <-> JPCRM conflict importing CSV file with products.
- Fixed: Fix an overflow in custom fields that use a textarea as type.
- Fixed: A collision between the slugs of Jetpack and Jetpack CRM extensions.
- Fixed: The dashboard contacts card, when it's empty, doesn't have padding.
- Improved: Now the transactions have available the hidden fields net, discount, fee.

## 4.0.12 - 2021-02-11
- Fixed: The setting API menu is visible after activating the API core extension.
- Improved: Move the EUR symbol to the top of the currencies selector

## 4.0.11 - 2021-02-01
- Fixed: Company activity log now shows the right time regardless of WP installation timezone
- Fixed: In some cases Invoice ID was lost when updating
- Fixed: Custom label for invoice ID now properly used throughout
- Fixed: Apostrophes in company and contact names now display properly throughout
- Fixed: Started work on PHP 8 support (fixed deprecation notices)
- Improved: Readme (.org description) improvements for readability, added more FAQs
- Improved: Settings now casted better, will overcome core extension loading issues for a handful of users on strict php installs
- Improved: Made menu adjustments for users using Jetpack and Jetpack CRM on the same install, for easier navigation

## 4.0.10 - 2020-12-17
- Fixed: Duplicated title in the short description logs when creating quotes, invoices, transactions and tasks
- Fixed: Custom field with auto-number broken with empty prefix
- Fixed: PHP notice for some users from email tracking system
- Fixed: Labels now again fully respect locale
- Improved: Hardened output of contact list on dash
- Improved: Hardened parsing of CSV files
- Improved: Custom field types numeric and numeric (decimal) are now reliably sortable via list views

## 4.0.9 - 2020-12-10
- Fixed: Migration issues where Jetpack CRM is installed with wp-cli
- Fixed: List views with 'Latest Contact' columns now load properly regardless of DB environment
- Fixed: PHP notice around quotes on contact view
- Fixed: Quote and Task auto-logging now working correctly
- Improved: Removed legacy country-check code
- Improved: Quote send via email now allows for optional attachment of quote as a pdf, or any associated files
- Improved: Hardened the security around the updating of activity logs
- Improved: Resolved a false-positive security flag in a security plugin (removed pclzip)
- Improved: Removed some logs from the Javascript console and some PHP notices
- Improved: Verified WordPress 5.6 support
- Added: New auto-log: Add an activity log to a contact on Quote Accepted
- Added: New hook jpcrm_quote_accepted

## 4.0.8 - 2020-11-25
- Fixed: Company label setting now respected throughout (e.g. Organisation)
- Fixed: Typeahead contact->company assignment for new contacts now displays properly
- Fixed: You can now have many filters without the view blocking access to them
- Improved: Event notification email templating
- Improved: Event notification email template: Took translations out of template file
- Improved: .org description improvements
- Improved: B2B mode is now a core extension and enabled by default
- Improved: Company settings unified into one settings page
- Improved: Transaction settings unified into one settings page
- Improved: Language labels surrounding company and transaction settings
- Improved: Removed legacy file
- Improved: Better styling around large elements on list views
- Added: You can now use an auto-number sequence as reference in invoices (with prefix and suffix)
- Added: Ability to change the label of 'Reference' for invoices
- Added: Signposting to Company settings page
- Added: DAL functionality for retrieving events and event reminders based on reminder status
- Added: Migration to update event notification email template

## 4.0.7 - 2020-11-12
- Fixed: Dompdf exception creating quotes with Preformatted option selected
- Fixed: Style bug when displaying multi-option custom fields on the contact and company view page
- Fixed: Bug where license system modal sometimes reloaded to an incorrect URL
- Fixed: Bug in permissions around verifying back end users
- Fixed: Removed internal PHP notice in Invoices section
- Fixed: Sorting contact list view by company now works properly
- Fixed: Bug where some logs were not showing under 'latest log' column (due to ownership)
- Fixed: Incorrectly referenced second address fields in DB Object model for companies
- Fixed: Total transaction column value on company list view
- Fixed: Several fields were not displaying properly in quote list view
- Fixed: A deep bug in address custom fields where those fields with hyphens in the key were unsortable
- Fixed: A bug where contact last contacted date was incorrectly showing as last updated value
- Improved: Support for checkbox and multi-select custom fields
- Improved: Keywords used for .org repository listing
- Improved: Settings now accessible directly from within module (e.g. Invoices) via learn bar button
- Improved: Corrected company name references
- Improved: License system modal notice language and UI
- Improved: License system update checks
- Improved: You can now search for Transactions, Quotes, Invoices, and Companies by ID
- Improved: Default sort order of DESC now reflects properly in list view sort icon
- Improved: Centralised definitions of "Contact" type logs
- Improved: Better formatting for 'added' date in company list view
- Added: Ability to sort contact list view by: Latest Log
- Added: Ability to sort contact list view by: Latest Contact Log
- Added: Ability to sort contact list view by: Has Quotes, Has Invoices, Has Transactions
- Added: Ability to sort contact list view by: Quote, Invoice, and Transaction count
- Added: Ability to sort company list view by: Name, Status, Email, and other standard fields
- Added: Ability to sort company list view by: Custom fields
- Added: Ability to sort company list view by: Number of contacts at company
- Added: Contact list view column "Has transactions"
- Added: Company list view columns: Has Invoices, Has transactions, Invoice Count, Transaction Count, Transaction Value, Total Value (and made them sortable)
- Added: Ability to sort quote list view by all columns
- Added: Ability to sort invoice list view by all columns
- Added: Ability to sort transaction list view by all columns
- Added: Ability to sort form list view by all columns
- Added: Last Updated column to contacts and companies

## 4.0.6 - 2020-10-29
- Fixed: Duplicated tag with international charactes when they are added to a contact
- Fixed: Style issue with Second Address block in the Client Portal
- Fixed: Invoice line items now able to be added to invoices (req invoicing pro v2.7.1)
- Fixed: Textarea custom field doesn't show new lines in view mode
- Fixed: Remove Advanced Search (can search from list view mode since v3.0)
- Fixed: JPCRM can not be installed if the API Connector plugin is already installed.
- Fixed: Style issue mapping the fields in the CSV Importer section

## 4.0.5 - 2020-10-15
- Fixed: Deleted segment shows as filter contact list view
- Fixed: On export the contact or the transaction list, in the CSV file the owner ID was blank
- Fixed: Wrong menu link showing task tags in CRM only mode
- Fixed: Forms now track visits and conversions properly
- Improved: Better mapping of older extension names into extension system
- Added: Exporting objects owners now also exports owner username
- Added: Core Extensions List updated with latest extensions

## 4.0.4 - 2020-10-02
- Fixed: Issue related to contact and company bulk action deletion
- Fixed: Old brand reference on CSV importer page
- Fixed: New Company placeholder more specific to a real business
- Fixed: Multi-value custom fields in client portal
- Fixed: JPCRM roles for contacts explicity deny WP role capabilities when activated
- Fixed: A user role still referenced the old brand
- Fixed: Create new invoices without selecting a due date was showing up as Invalid Date
- Fixed: Extension documentation links
- Fixed: In the single contact view, the Invoices Total and Quotes Total now show their correct values
- Fixed: Country field properly shows on contacts/companies
- Fixed: Disabled modules show in the sidebar for CRM-only and Full layouts
- Improved: Task scheduler now shows owner avatars
- Improved: Contact List view can now be sorted by Total value as well as Quotes, Invoices, and Transactions total values
- Improved: Form submission logs
- Improved: Addressed stray PHP notices
- Improved: Tweaked extensions detail page
- Improved: Updated error messaging
- Improved: Beginning of internal refactor of the API

## 4.0.3 - 2020-09-17
- Fixed: API docs link was incorrect
- Fixed: Form widget now works as expected
- Fixed: Restored user filter for tasks
- Fixed: Custom field doesn't show up the dates previous to 1970
- Improved: Revenue chart on CRM Dash
- Improved: Added gender-neutral contact prefix
- Improved: Settings navigation styling
- Improved: More robust paid extension handling
- Improved: Tweaked list view columns
- Added: Mail activity log type

## 4.0.2 - 2020-09-04
- Fixed: Dashboard Revenue Chart was missing some transactions
- Fixed: Customer pre-fill now pre-fills properly.
- Fixed: Date paid and date completed now always filled
- Fixed: Bulk selection not working in WP5.5+
- Fixed: WP5.5+ jQuery function support
- Fixed: Some learn buttons were appearing behind some other elements
- Fixed: Custom dates like Birthday were not allowing pre 1970 date entries
- Fixed: Logo hover icon for fullscreen now turned black from white on white
- Fixed: Author update to be Automattic
- Fixed: Task status labels now format the colour of the label
- Improved: Dashboard Revenue Chart now shows 12 months

## 4.0.1 - 2020-08-20
- Fixed: AJAX.php file was being detected as a virus by some AV scanners
- Fixed: Removed unnecessary notification after plugin installation
- Fixed: the Jetpack Forms extension name
- Fixed: Edit profile avatar sometimes not aligning correcetly
- Fixed: Transaction creation prefill now works
- Fixed: View button on transaction (after assigning a contact) now takes you to view, not edit
- Fixed: Clicking a sent email was not loading email correctly
- Fixed: Date Paid field is now in correct format in transactions list view.
- Improved: Made links open in parent tab rather than new tab where it made sense to do so
- Improved: Store the name from a Jetpack contact form submission
- Improved: The Jetpack Forms extension will now be enabled by default when the settings are initialized or reset
- Added: Use the Jetpack contact form toggle setting to determine whether to save the contact
- Added: Ability to hide prefix field

## 4.0.0 - 2020-07-20
- Jetpack CRM branding

[5.5.4-a.1]: https://github.com/Automattic/jetpack-crm/compare/v5.5.3...v5.5.4-a.1
[6.4.3]: https://github.com/Automattic/jetpack-crm/compare/6.4.2...6.4.3
[6.4.2]: https://github.com/Automattic/jetpack-crm/compare/6.4.1...6.4.2
[6.4.1]: https://github.com/Automattic/jetpack-crm/compare/6.4.0...6.4.1
[6.4.0]: https://github.com/Automattic/jetpack-crm/compare/6.3.2...6.4.0
[6.3.2]: https://github.com/Automattic/jetpack-crm/compare/6.3.1...6.3.2
[6.3.1]: https://github.com/Automattic/jetpack-crm/compare/6.3.0...6.3.1
[6.3.0]: https://github.com/Automattic/jetpack-crm/compare/6.2.0...6.3.0
[6.2.0]: https://github.com/Automattic/jetpack-crm/compare/6.1.0...6.2.0
[6.1.0]: https://github.com/Automattic/jetpack-crm/compare/6.0.0...6.1.0
[6.0.0]: https://github.com/Automattic/jetpack-crm/compare/5.8.0...6.0.0
[5.8.0]: https://github.com/Automattic/jetpack-crm/compare/5.7.0...5.8.0
[5.7.0]: https://github.com/Automattic/jetpack-crm/compare/v5.6.0...v5.7.0
[5.6.0]: https://github.com/Automattic/jetpack-crm/compare/v5.5.4-a.1...v5.6.0
