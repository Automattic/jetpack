/* Do not modify this file directly. It is compiled from other files. */
!function(t,s,i){i.controlConstructor.jetpackCss=i.Control.extend({modes:{default:"text/css",less:"text/x-less",sass:"text/x-scss"},_updating:!1,ready:function(){this.opts=window._jp_css_settings,this.$input=s("<textarea />",{name:this.setting.id,class:"for-codemirror hidden"}).val(this.setting()),this.container.append(this.$input),i(this.setting.id,_.bind(function(t){var s=new i.Element(this.$input);this.elements=[s],s.sync(t),s.set(t())},this)),this.opts.useRichEditor?this.initCodeMirror():this.$input.removeClass("hidden"),i.bind("ready",_.bind(this.addLabels,this))},initCodeMirror:function(){this.editor=window.CodeMirror.fromTextArea(this.$input.get(0),{mode:this.getMode(),lineNumbers:!0,tabSize:2,indentWithTabs:!0,lineWrapping:!0}),this.addListeners()},addListeners:function(){var t=!1;s("#accordion-section-custom_css > .accordion-section-title").click(_.bind(_.debounce(this.editor.refresh,250),this.editor)),this.editor.on("focus",function(t){t.refresh()}),this.editor.on("change",_.bind(function(s){this._updating=!0,this.$input.val(s.getValue()).trigger("change"),this._updating=!1,t||(window.ga&&window.ga("send","event","Customizer","Typed Custom CSS"),t=!0)},this)),this.editor.on("focus",function(){window.ga&&window.ga("send","event","Customizer","Focused CSS Editor")}),this.setting.bind("change",_.bind(this.externalChange,this))},getMode:function(){var t=i("jetpack_custom_css[preprocessor]")();return""!==t&&this.modes[t]||(t="default"),this.modes[t]},externalChange:function(){this._updating||this.editor.setValue(this.setting())},refresh:function(t){"accordion-section-custom_css"===t&&setTimeout(_.bind(function(){this.editor.refresh()},this),300)},addLabels:function(){this.addTitle("jetpack_css_mode_control",this.opts.l10n.mode),this.addTitle("jetpack_mobile_css_control",this.opts.l10n.mobile),this.addDesc("wpcom_custom_css_content_width_control",this.opts.l10n.contentWidth);var t=this._getControl("wpcom_custom_css_content_width_control");t&&t.find("input").after("<span>px</span>"),s("<div />",{id:"css-help-links",class:"css-help"}).appendTo(this.container),s("<a />",{id:"help-link",target:"_blank",href:this.opts.cssHelpUrl,text:this.opts.l10n.css_help_title}).prependTo("#css-help-links"),this.opts.areThereCssRevisions&&s("<a />",{id:"revisions-link",target:"_blank",href:this.opts.revisionsUrl,text:this.opts.l10n.revisions}).prependTo("#css-help-links")},addTitle:function(t,s){var i=this._getControl(t);i&&i.prepend('<span class="customize-control-title">'+s+"<span>")},addDesc:function(t,s){var i=this._getControl(t);i&&i.append('<span class="description">'+s+"<span>")},_getControl:function(t){var s=i.control.value(t);return s?s.container:null}})}(this.wp,jQuery,this.wp.customize);