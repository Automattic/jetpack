{"version":3,"sources":["likes/post-count.js"],"names":["wpPostLikeCount","$","jQuery","extend","jsonAPIbase","APIqueue","each","post_id","this","attr","blog_id","push","getCounts","showCount","count","find","hide","text","fadeIn","batchRequest","path","data","success","response","error_data","urlPieces","split","found","error","amp","i","length","request","document","ready"],"mappings":";;AAGA,GAAIA,iBAAkBA,qBAEtB,SAAUC,GAETD,gBAAkBE,OAAOC,OAAQH,iBAEhCI,YAAa,2CACbC,YAEAL,gBAAiB,WAChBC,EAAG,oBAAqBK,KAAM,WAC7B,GAAIC,GAAUN,EAAEO,MAAMC,KAAM,gBACxBC,EAAUT,EAAEO,MAAMC,KAAM,eAC5BT,iBAAgBK,SAASM,KAAM,UAAYD,EAAU,UAAYH,EAAU,YAE5EP,gBAAgBY,aAGjBC,UAAW,SAAUN,EAASO,GACxBA,EAAQ,IACZb,EAAG,oBAAsBM,GAAUQ,KAAM,kBAAmBC,OAC5Df,EAAG,oBAAsBM,GAAUQ,KAAM,kBAAmBE,KAAMH,GAClEb,EAAG,oBAAsBM,GAAUQ,KAAM,kBAAmBG,WAI9DN,UAAW,WAkBV,IAAK,GAjBDO,IACHC,KAAS,SACTC,KAAS,GACTC,QAAS,SAAUC,GAClB,IAAM,GAAIH,KAAQG,GACjB,IAAOA,EAASH,GAAMI,WAAa,CAClC,GAAIC,GAAYL,EAAKM,MAAO,KACxBnB,EAAUkB,EAAU,EACxBzB,iBAAgBa,UAAWN,EAASgB,EAASH,GAAMO,SAItDC,MAAO,cAIJC,EAAM,GACDC,EAAI,EAAGA,EAAI9B,gBAAgBK,SAAS0B,OAAQD,IAC/CA,EAAI,IACRD,EAAM,KAEPV,EAAaE,MAAQQ,EAAM,UAAY7B,gBAAgBK,SAASyB,EAGjE9B,iBAAgBgC,QAASb,OAIzBjB,QAEHA,OAAO+B,UAAUC,MAAM,WACtBlC,gBAAgBA","file":"../../likes/post-count.min.js","sourcesContent":["/* Do not modify this file directly. It is compiled from other files. */\n/* jshint onevar: false, smarttabs: true */\n\nvar wpPostLikeCount = wpPostLikeCount || {};\n\n(function($) {\n\n\twpPostLikeCount = jQuery.extend( wpPostLikeCount, {\n\n\t\tjsonAPIbase: 'https://public-api.wordpress.com/rest/v1',\n\t\tAPIqueue:    [],\n\n\t\twpPostLikeCount: function() {\n\t\t\t$( '.post-like-count' ).each( function() {\n\t\t\t\tvar post_id = $(this).attr( 'data-post-id' );\n\t\t\t\tvar blog_id = $(this).attr( 'data-blog-id' );\n\t\t\t\twpPostLikeCount.APIqueue.push( '/sites/' + blog_id + '/posts/' + post_id + '/likes' );\n\t\t\t} );\n\t\t\twpPostLikeCount.getCounts();\n\t\t},\n\n\t\tshowCount: function( post_id, count ) {\n\t\t\tif ( count > 0 ) {\n\t\t\t\t$( '#post-like-count-' + post_id ).find( '.comment-count' ).hide();\n\t\t\t\t$( '#post-like-count-' + post_id ).find( '.comment-count' ).text( count );\n\t\t\t\t$( '#post-like-count-' + post_id ).find( '.comment-count' ).fadeIn();\n\t\t\t}\n\t\t},\n\n\t\tgetCounts: function() {\n\t\t\tvar batchRequest = {\n\t\t\t\tpath:    '/batch',\n\t\t\t\tdata:    '',\n\t\t\t\tsuccess: function( response ) {\n\t\t\t\t\tfor ( var path in response ) {\n\t\t\t\t\t\tif ( ! response[path].error_data ) {\n\t\t\t\t\t\t\tvar urlPieces = path.split( '/' ); // pieces[4] = post id;\n\t\t\t\t\t\t\tvar post_id = urlPieces[4];\n\t\t\t\t\t\t\twpPostLikeCount.showCount( post_id, response[path].found );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function( /*response*/ ) {\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar amp = '';\n\t\t\tfor( var i = 0; i < wpPostLikeCount.APIqueue.length; i++ ) {\n\t\t\t\tif ( i > 0 ) {\n\t\t\t\t\tamp = '&';\n\t\t\t\t}\n\t\t\t\tbatchRequest.data += amp + 'urls[]=' + wpPostLikeCount.APIqueue[i];\n\t\t\t}\n\n\t\t\twpPostLikeCount.request( batchRequest );\n\t\t}\n\t} );\n\n})(jQuery);\n\njQuery(document).ready(function(/*$*/) {\n\twpPostLikeCount.wpPostLikeCount();\n});\n"]}