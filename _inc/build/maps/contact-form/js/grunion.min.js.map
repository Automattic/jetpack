{"version":3,"sources":["contact-form/js/grunion.js"],"names":["window","FB","GrunionFB_i18n","jQuery","extend","nameLabel","emailLabel","urlLabel","commentLabel","newLabel","optionsLabel","optionLabel","firstOptionLabel","problemGeneratingForm","moveInstructions","moveLabel","editLabel","savedMessage","requiredLabel","exitConfirmMessage","maxNewFields","invalidEmail","replace","span","esc_html","string","text","html","esc_attr","ContactForm","addField","grunionNewCount","append","fbForm","fields","label","type","required","options","order","hide","optionsCount","optionsCache","val","setTimeout","focus","select","e","debug","console","log","addOption","length","thisId","thisType","buildPreview","to","subject","each","index","value","before","i","updateType","customOptions","id","thisOptions","undefined","deleteField","that","attr","parent","remove","show","editField","scroll","loadFieldEditor","grabShortcode","post","ajaxurl","response","shortcode","alert","hideDesc","hidePopup","document","unbind","fadeOut","removeClass","trigger","body","style","maxHeight","css","height","width","onkeydown","onkeyup","hideShowEditLink","whichType","is","find","prepend","prop","parseShortcode","data","parseInt","defaultFields","removeOption","optionId","thisVal","idx","indexOf","splice","removeOptions","sendShortcodeToEditor","this","isVisual","hasClass","currentCode","win","dialogArguments","opener","top","tinyMCE","activeEditor","getContent","regexp","RegExp","match","execCommand","send_to_editor","showDesc","showAndHideMessage","message","newMessage","slideDown","slideUp","switchTabs","validateEmails","addClass","emails","$e","emailList","split","validateEmail","email","test","updateLabel","thisLabel","updateMyEmail","thisEmail","updateOption","thisOptionid","thisOptionValue","updateRequired","updateSubject","thisSubject","thisLabelText","thisRequired","isRequired","thisRadio","thisRadioLabel","thisRadioRemove","thisRemove","thisCheckbox","thisCheckboxMultiple","thisCheckboxMultipleRemove","thisText","thisTextarea","thisClear","thisSelect","action","_ajax_nonce","ajax_nonce_shortcode","name","url","comment","resizePop","totalWidth","totalHeight","isIE6","left","position","marginLeft","init","contentSource","ajax_nonce_json","post_id","postId","content","$doc","parseJSON","click","keyup","change","on","submit","mousedown","confirm","blur","thisHref","location","sortable","axis","handle","revert","start","draggable","connectToSortable","helper"],"mappings":"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","file":"../../../contact-form/js/grunion.min.js","sourcesContent":["/* Do not modify this file directly. It is compiled from other files. */\n/* jshint onevar: false, devel: true, smarttabs: true */\n/* global GrunionFB_i18n: true, FB, ajax_nonce_shortcode, ajax_nonce_json, ajaxurl, postId */\n\nif ( ! window.FB ) {\n\twindow.FB = {};\n}\n\nGrunionFB_i18n = jQuery.extend( {\n\tnameLabel: 'Name',\n\temailLabel: 'Email',\n\turlLabel: 'Website',\n\tcommentLabel: 'Comment',\n\tnewLabel: 'New Field',\n\toptionsLabel: 'Options',\n\toptionLabel: 'Option',\n\tfirstOptionLabel: 'First option',\n\tproblemGeneratingForm: 'Oops, there was a problem generating your form.  You\\'ll likely need to try again.',\n\tmoveInstructions: 'Drag up or down\\nto re-arrange',\n\tmoveLabel: 'move',\n\teditLabel: 'edit',\n\tsavedMessage: 'Saved successfully',\n\trequiredLabel: '(required)',\n\texitConfirmMessage: 'Are you sure you want to exit the form editor without saving?  Any changes you have made will be lost.',\n\tmaxNewFields: 5,\n\tinvalidEmail: ' is an invalid email address.'\n}, GrunionFB_i18n );\n\nGrunionFB_i18n.moveInstructions = GrunionFB_i18n.moveInstructions.replace( '\\n', '<br />' );\n\nFB.span = jQuery( '<span>' );\nFB.esc_html = function( string ) {\n\treturn FB.span.text( string ).html();\n};\n\nFB.esc_attr = function( string ) {\n\tstring = FB.esc_html( string );\n\treturn string.replace( '\"', '&quot;' ).replace( '\\'', '&#039;' );\n};\n\nFB.ContactForm = (function() {\n\tvar fbForm = { // Main object that generated shortcode via AJAX call\n\t'action' : 'grunion_shortcode',\n\t'_ajax_nonce' : ajax_nonce_shortcode,\n\t'to' : '',\n\t'subject' : '',\n\t'fields' : {}\n\t};\n\tvar defaultFields = {\n\t\t'name': {\n\t\t\t'label' : GrunionFB_i18n.nameLabel,\n\t\t\t'type' : 'name',\n\t\t\t'required' : true,\n\t\t\t'options' : [],\n\t\t\t'order' : '1'\n\t\t},\n\t\t'email': {\n\t\t\t'label' : GrunionFB_i18n.emailLabel,\n\t\t\t'type' : 'email',\n\t\t\t'required' : true,\n\t\t\t'options' : [],\n\t\t\t'order' : '2'\n\t\t},\n\t\t'url': {\n\t\t\t'label' : GrunionFB_i18n.urlLabel,\n\t\t\t'type' : 'url',\n\t\t\t'required' : false,\n\t\t\t'options' : [],\n\t\t\t'order' : '3'\n\t\t},\n\t\t'comment': {\n\t\t\t'label' : GrunionFB_i18n.commentLabel,\n\t\t\t'type' : 'textarea',\n\t\t\t'required' : true,\n\t\t\t'options' : [],\n\t\t\t'order' : '4'\n\t\t}\n\t};\n\tvar debug = false; // will print errors to log if true\n\tvar grunionNewCount = 0; // increment for new fields\n\tvar maxNewFields = GrunionFB_i18n.maxNewFields;  // See filter in ../grunion-form-view.php\n\tvar optionsCache = {};\n\tvar optionsCount = 0; // increment for options\n\tvar shortcode;\n\n\tfunction addField () {\n\t\ttry {\n\t\t\tgrunionNewCount++;\n\t\t\tif (grunionNewCount <= maxNewFields) {\n\t\t\t\t// Add to preview\n\t\t\t\tjQuery('#fb-extra-fields').append('<div id=\"fb-new-field' + grunionNewCount + '\" fieldid=\"' + grunionNewCount + '\" class=\"fb-new-fields\"><div class=\"fb-fields\"><div id=\"' + grunionNewCount + '\" class=\"fb-remove\"></div><label fieldid=\"' + grunionNewCount + '\" for=\"fb-field' + grunionNewCount + '\"><span class=\"label-text\">' + GrunionFB_i18n.newLabel + '</span> </label><input type=\"text\" id=\"fb-field' + grunionNewCount + '\" disabled=\"disabled\" /></div></div>');\n\t\t\t\t// Add to form object\n\t\t\t\tfbForm.fields[grunionNewCount] = {\n\t\t\t\t\t'label' : GrunionFB_i18n.newLabel,\n\t\t\t\t\t'type' : 'text',\n\t\t\t\t\t'required' : false,\n\t\t\t\t\t'options' : [],\n\t\t\t\t\t'order' : '5'\n\t\t\t\t};\n\t\t\t\tif (grunionNewCount === maxNewFields) {\n\t\t\t\t\tjQuery('#fb-new-field').hide();\n\t\t\t\t}\n\t\t\t\t// Reset form for this new field\n\t\t\t\toptionsCount = 0;\n\t\t\t\toptionsCache = {};\n\t\t\t\tjQuery('#fb-new-options').html('<label for=\"fb-option0\">' + GrunionFB_i18n.optionsLabel + '</label><input type=\"text\" id=\"fb-option0\" optionid=\"0\" value=\"' + GrunionFB_i18n.firstOptionLabel + '\" class=\"fb-options\" />');\n\t\t\t\tjQuery('#fb-options').hide();\n\t\t\t\tjQuery('#fb-new-label').val( GrunionFB_i18n.newLabel );\n\t\t\t\tjQuery('#fb-new-type').val('text');\n\t\t\t\tjQuery('#fb-field-id').val(grunionNewCount);\n\t\t\t\tsetTimeout(function () { jQuery('#fb-new-label').focus().select(); }, 100);\n\t\t\t} else {\n\t\t\t\tjQuery('#fb-new-field').hide();\n\t\t\t}\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('addField(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction addOption () {\n\t\ttry {\n\t\t\toptionsCount = jQuery( '#fb-new-options .fb-options' ).length;\n\t\t\tvar thisId = jQuery('#fb-field-id').val();\n\t\t\tvar thisType = jQuery('#fb-new-type').val();\n\t\t\tif (thisType === 'radio') {\n\t\t\t\t// Add to right col\n\t\t\t\tjQuery('#fb-new-options').append('<div id=\"fb-option-box-' + optionsCount + '\" class=\"fb-new-fields\"><span optionid=\"' + optionsCount + '\" class=\"fb-remove-option\"></span><label></label><input type=\"text\" id=\"fb-option' + optionsCount + '\" optionid=\"' + optionsCount + '\" value=\"' + GrunionFB_i18n.optionLabel + '\" class=\"fb-options\" /><div>');\n\t\t\t\t// Add to preview\n\t\t\t\tjQuery('#fb-new-field' + thisId + ' .fb-fields').append('<div id=\"fb-radio-' + thisId + '-' + optionsCount + '\"><input type=\"radio\" disabled=\"disabled\" id=\"fb-field' + thisId + '\" name=\"radio-' + thisId + '\" /><span>' + GrunionFB_i18n.optionLabel + '</span><div class=\"clear\"></div></div>');\n\t\t\t} else if ( 'checkbox-multiple' === thisType ) {\n\t\t\t\t// Add to right col\n\t\t\t\tjQuery('#fb-new-options').append('<div id=\"fb-option-box-' + optionsCount + '\" class=\"fb-new-fields\"><span optionid=\"' + optionsCount + '\" class=\"fb-remove-option\"></span><label></label><input type=\"text\" id=\"fb-option' + optionsCount + '\" optionid=\"' + optionsCount + '\" value=\"' + GrunionFB_i18n.optionLabel + '\" class=\"fb-options\" /><div>');\n\t\t\t\t// Add to preview\n\t\t\t\tjQuery('#fb-new-field' + thisId + ' .fb-fields').append('<div id=\"fb-checkbox-multiple-' + thisId + '-' + optionsCount + '\"><input type=\"checkbox\" disabled=\"disabled\" id=\"fb-field' + thisId + '\" name=\"checkbox-multiple-' + thisId + '\" /><span>' + GrunionFB_i18n.optionLabel + '</span><div class=\"clear\"></div></div>');\n\t\t\t} else {\n\t\t\t\t// Add to right col\n\t\t\t\tjQuery('#fb-new-options').append('<div id=\"fb-option-box-' + optionsCount + '\" class=\"fb-new-fields\"><span optionid=\"' + optionsCount + '\" class=\"fb-remove-option\"></span><label></label><input type=\"text\" id=\"fb-option' + optionsCount + '\" optionid=\"' + optionsCount + '\" value=\"\" class=\"fb-options\" /><div>');\n\t\t\t\t// Add to preview\n\t\t\t\tjQuery('#fb-field'+ thisId).append('<option id=\"fb-' + thisId + '-' + optionsCount + '\" value=\"' + thisId + '-' + optionsCount + '\"></option>');\n\t\t\t}\n\t\t\t// Add to fbForm object\n\t\t\tfbForm.fields[thisId].options[optionsCount] = '';\n\t\t\t// Add focus to new field\n\t\t\tjQuery('#fb-option' + optionsCount).focus().select();\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('addOption(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction buildPreview () {\n\t\ttry {\n\t\t\tif (fbForm.to) { jQuery('#fb-field-my-email').val(fbForm.to); }\n\t\t\tif (fbForm.subject) { jQuery('#fb-field-subject').val(fbForm.subject); }\n\t\t\t// Loop over and add fields\n\t\t\tjQuery.each(fbForm.fields, function(index, value) {\n\t\t\t\tjQuery('#fb-extra-fields').before('<div class=\"fb-new-fields ui-state-default\" fieldid=\"' + index + '\" id=\"fb-new-field' + index + '\"><div class=\"fb-fields\"></div></div>');\n\t\t\t\tjQuery('#fb-field-id').val(index);\n\t\t\t\toptionsCache[index] = {};\n\t\t\t\toptionsCache[index].options = [];\n\t\t\t\tif ( 'radio' === value.type || 'select' === value.type || 'checkbox-multiple' === value.type ) {\n\t\t\t\t\tjQuery.each(value.options, function(i, value) {\n\t\t\t\t\t\toptionsCache[index].options[i] = value;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tupdateType(value.type, value.label, value.required);\n\t\t\t});\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('buildPreview(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction customOptions (id, thisType) {\n\t\ttry {\n\t\t\tvar thisOptions = '';\n\t\t\tfor (var i=0; i<optionsCache[id].options.length; i++) {\n\t\t\t\tif (optionsCache[id].options[i] !== undefined) {\n\t\t\t\t\tif (thisType === 'radio') {\n\t\t\t\t\t\tthisOptions = thisOptions + '<div id=\"fb-radio-' + id + '-' + i + '\"><input type=\"radio\" id=\"fb-field' + id + '\" name=\"radio-' + id + '\" /><span>' + FB.esc_html( optionsCache[id].options[i] ) + '</span><div class=\"clear\"></div></div>';\n\t\t\t\t\t} else if ( 'checkbox-multiple' === thisType ) {\n\t\t\t\t\t\tthisOptions = thisOptions + '<div id=\"fb-checkbox-multiple-' + id + '-' + i + '\"><input type=\"checkbox\" id=\"fb-field' + id + '\" name=\"checkbox-multiple-' + id + '\" /><span>' + FB.esc_html( optionsCache[id].options[i] ) + '</span><div class=\"clear\"></div></div>';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthisOptions = thisOptions + '<option id=\"fb-' + id + '-' + i + '\" value=\"' + id + '-' + i + '\">' + FB.esc_html( optionsCache[id].options[i] ) + '</option>';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn thisOptions;\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('customOptions(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction deleteField (that) {\n\t\ttry {\n\t\t\tgrunionNewCount--;\n\t\t\tvar thisId = that.attr('id');\n\t\t\tdelete fbForm.fields[thisId];\n\t\t\tjQuery('#' + thisId).parent().parent().remove();\n\t\t\tif (grunionNewCount <= maxNewFields) {\n\t\t\t\tjQuery('#fb-new-field').show();\n\t\t\t}\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('deleteField(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction editField (that) {\n\t\ttry {\n\t\t\tscroll(0,0);\n\t\t\tsetTimeout(function () { jQuery('#fb-new-label').focus().select(); }, 100);\n\t\t\tvar thisId = that.parent().attr('fieldid');\n\t\t\tloadFieldEditor(thisId);\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('editField(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction grabShortcode () {\n\t\ttry {\n\t\t\t// Takes fbForm object and returns shortcode syntax\n\t\t\tjQuery.post(ajaxurl, fbForm, function(response) {\n\t\t\t\tshortcode = response;\n\t\t\t});\n\t\t} catch(e) {\n\t\t\talert( GrunionFB_i18n.problemGeneratingForm );\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('grabShortcode(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction hideDesc () {\n\t\tjQuery('#fb-desc').hide();\n\t\tjQuery('#fb-add-field').show();\n\t}\n\tfunction hidePopup () {\n\t\ttry {\n\t\t\t// copied from wp-includes/js/thickbox/thickbox.js\n\t\t\tjQuery('#TB_imageOff', window.parent.document).unbind('click');\n\t\t\tjQuery('#TB_closeWindowButton', window.parent.document).unbind('click');\n\t\t\tjQuery('#TB_window', window.parent.document).fadeOut('fast');\n\t\t\tjQuery('body', window.parent.document).removeClass('modal-open');\n\t\t\tjQuery('#TB_window,#TB_overlay,#TB_HideSelect', window.parent.document).trigger('unload').unbind().remove();\n\t\t\tjQuery('#TB_load', window.parent.document).remove();\n\t\t\tif (typeof window.parent.document.body.style.maxHeight === 'undefined') {//if IE 6\n\t\t\t\tjQuery('body', 'html', window.parent.document).css({height: 'auto', width: 'auto'});\n\t\t\t\tjQuery('html', window.parent.document).css('overflow', '');\n\t\t\t}\n\t\t\twindow.parent.document.onkeydown = '';\n\t\t\twindow.parent.document.onkeyup = '';\n\t\t\treturn false;\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('hidePopup(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction hideShowEditLink (whichType, that) {\n\t\ttry {\n\t\t\tif (whichType === 'show') {\n\t\t\t\t// Prevents showing links twice\n\t\t\t\tif (jQuery('.fb-edit-field').is(':visible')) {\n\t\t\t\t\tjQuery('.fb-edit-field').remove();\n\t\t\t\t}\n\t\t\t\tthat.find('label').prepend('<span class=\"right fb-edit-field\" style=\"font-weight: normal;\"><a href=\"\" class=\"fb-reorder\"><div style=\"display: none;\">' + GrunionFB_i18n.moveInstructions + '</div>' + GrunionFB_i18n.moveLabel + '</a>&nbsp;&nbsp;<span style=\"color: #C7D8DE;\">|</span>&nbsp;&nbsp;<a href=\"\" class=\"fb-edit\">' + GrunionFB_i18n.editLabel + '</a></span>');\n\t\t\t} else {\n\t\t\t\tjQuery('.fb-edit-field').remove();\n\t\t\t}\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('hideShowEditLink(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction loadFieldEditor (id) {\n\t\ttry {\n\t\t\tvar thisType = fbForm.fields[id].type;\n\t\t\tjQuery('#fb-options').hide();\n\t\t\t// Reset hidden field ID\n\t\t\tjQuery('#fb-field-id').val(id);\n\t\t\t// Load label\n\t\t\tjQuery('#fb-new-label').val(fbForm.fields[id].label);\n\t\t\t// Load type\n\t\t\tjQuery('#fb-new-type').val(fbForm.fields[id].type);\n\t\t\t// Load required\n\t\t\tif (fbForm.fields[id].required) {\n\t\t\t\tjQuery('#fb-new-required').prop('checked', true);\n\t\t\t} else {\n\t\t\t\tjQuery('#fb-new-required').prop('checked', false);\n\t\t\t}\n\t\t\t// Load options if there are any\n\t\t\tif ( 'select' === thisType || 'radio' === thisType || 'checkbox-multiple' === thisType ) {\n\t\t\t\tvar thisOptions = fbForm.fields[id].options;\n\t\t\t\tjQuery('#fb-options').show();\n\t\t\t\tjQuery('#fb-new-options').html(''); // Clear it all out\n\t\t\t\tfor (var i=0; i<thisOptions.length; i++) {\n\t\t\t\t\tif (thisOptions[i] !== undefined) {\n\t\t\t\t\t\tif (thisType === 'radio') {\n\t\t\t\t\t\t\tjQuery('#fb-new-options').append('<div id=\"fb-option-box-' + i + '\" class=\"fb-new-fields\"><span optionid=\"' + i + '\" class=\"fb-remove-option\"></span><label></label><input type=\"text\" id=\"fb-option' + i + '\" optionid=\"' + i + '\" value=\"' + FB.esc_attr( fbForm.fields[id].options[i] ) + '\" class=\"fb-options\" /><div>');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tjQuery('#fb-new-options').append('<div id=\"fb-option-box-' + i + '\" class=\"fb-new-fields\"><span optionid=\"' + i + '\" class=\"fb-remove-option\"></span><label></label><input type=\"text\" id=\"fb-option' + i + '\" optionid=\"' + i + '\" value=\"' + FB.esc_attr( fbForm.fields[id].options[i] ) + '\" class=\"fb-options\" /><div>');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Load editor & hide description\n\t\t\thideDesc();\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('loadFieldEditor(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction parseShortcode (data) {\n\t\ttry {\n\t\t\t// Clean up fields by resetting them\n\t\t\tfbForm.fields = {};\n\t\t\t// Add new fields\n\t\t\tif (!data) {\n\t\t\t\tfbForm.fields = defaultFields;\n\t\t\t} else {\n\t\t\t\tjQuery.each(data.fields, function(index, value) {\n\t\t\t\t\tif ( 1 === parseInt(value.required, 10) ) {\n\t\t\t\t\t\tvalue.required = 'true';\n\t\t\t\t\t}\n\t\t\t\t\tfbForm.fields[index] = value;\n\t\t\t\t});\n\t\t\t\tfbForm.to = data.to;\n\t\t\t\tfbForm.subject = data.subject;\n\t\t\t}\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('parseShortcode(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeOption (optionId) {\n\t\ttry {\n\t\t\tvar thisId = jQuery('#fb-field-id').val();\n\t\t\tvar thisVal = jQuery('#fb-option' + optionId).val();\n\t\t\tvar thisType = jQuery('#fb-new-type').val();\n\t\t\t// Remove from right\n\t\t\tjQuery('#fb-option-box-' + optionId).remove();\n\t\t\t// Remove from preview\n\t\t\tif (thisType === 'radio') {\n\t\t\t\tjQuery('#fb-radio-' + thisId + '-' + optionId).remove();\n\t\t\t} else if ( 'checkbox-multiple' === thisType ) {\n\t\t\t\tjQuery('#fb-checkbox-multiple-' + thisId + '-' + optionId).remove();\n\t\t\t} else {\n\t\t\t\tjQuery('#fb-' + thisId + '-' + optionId).remove();\n\t\t\t}\n\t\t\t// Remove from fbForm object\n\t\t\tvar idx = fbForm.fields[thisId].options.indexOf(thisVal);\n\t\t\tif (idx !== -1) { fbForm.fields[thisId].options.splice(idx, 1); }\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('removeOption(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeOptions () {\n\t\ttry {\n\t\t\tvar thisId = jQuery('#fb-field-id').val();\n\t\t\tjQuery('#fb-options').hide();\n\t\t\tif (optionsCache[thisId] === undefined) { optionsCache[thisId] = {}; }\n\t\t\toptionsCache[thisId].options = fbForm.fields[thisId].options; // Save options in case they change their mind\n\t\t\tfbForm.fields[thisId].options = []; // Removes all options\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('removeOptions(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction sendShortcodeToEditor () {\n\t\ttry {\n\t\t\t// Serialize fields\n\t\t\tjQuery('div#sortable div.fb-new-fields').each(function(index) {\n\t\t\t\tvar thisId = jQuery(this).attr('fieldid');\n\t\t\t\tfbForm.fields[thisId].order = index;\n\t\t\t});\n\t\t\t// Export to WYSIWYG editor\n\t\t\tjQuery.post(ajaxurl, fbForm, function(response) {\n\t\t\t\tvar isVisual = jQuery('#edButtonPreview', window.parent.document).hasClass('active');\n\t\t\t\t/* WP 3.3+ */\n\t\t\t\tif ( !isVisual ) {\n\t\t\t\t\tisVisual = jQuery( '#wp-content-wrap', window.parent.document ).hasClass( 'tmce-active' );\n\t\t\t\t}\n\n\t\t\t\tvar win = window.dialogArguments || opener || parent || top;\n\t\t\t\tvar currentCode;\n\t\t\t\tif (isVisual) {\n\t\t\t\t\tcurrentCode = win.tinyMCE.activeEditor.getContent();\n\t\t\t\t} else {\n\t\t\t\t\tcurrentCode = jQuery('#editorcontainer textarea', window.parent.document).val();\n\t\t\t\t\t/* WP 3.3+ */\n\t\t\t\t\tif ( typeof currentCode !== 'string' ) {\n\t\t\t\t\t\tcurrentCode = jQuery( '.wp-editor-area', window.parent.document ).val();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar regexp = new RegExp('\\\\[contact-form\\\\b.*?\\\\/?\\\\](?:[\\\\s\\\\S]+?\\\\[\\\\/contact-form\\\\])?');\n\n\t\t\t\t// Remove new lines that cause BR tags to show up\n\t\t\t\tresponse = response.replace(/\\n/g,' ');\n\t\t\t\t// Convert characters to comma\n\t\t\t\tresponse = response.replace( /%26#x002c;/g , ',' );\n\n\t\t\t\t// Add new shortcode\n\t\t\t\tif (currentCode.match(regexp)) {\n\t\t\t\t\tif (isVisual) {\n\t\t\t\t\t\twin.tinyMCE.activeEditor.execCommand('mceSetContent', false, currentCode.replace(regexp, response));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// looks like the visual editor is disabled,\n\t\t\t\t\t\t// update the contents of the post directly\n\t\t\t\t\t\tjQuery( '#content', window.parent.document ).val( currentCode.replace( regexp, response ) );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttry {\n\t\t\t\t\t\twin.send_to_editor( response );\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\tif (isVisual) {\n\t\t\t\t\t\t\twin.tinyMCE.activeEditor.execCommand('mceInsertContent', false, response);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// looks like the visual editor is disabled,\n\t\t\t\t\t\t\t// update the contents of the post directly\n\t\t\t\t\t\t\tjQuery( '#content', window.parent.document ).val( currentCode + response );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\thidePopup();\n\t\t\t});\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('sendShortcodeToEditor(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction showDesc () {\n\t\tjQuery('#fb-desc').show();\n\t\tjQuery('#fb-add-field').hide();\n\t}\n\tfunction showAndHideMessage (message) {\n\t\ttry {\n\t\t\tvar newMessage = (!message) ? GrunionFB_i18n.savedMessage : message;\n\t\t\tjQuery('#fb-success').text(newMessage);\n\t\t\tjQuery('#fb-success').slideDown('fast');\n\t\t\tsetTimeout(function () {\n\t\t\t\t jQuery('#fb-success').slideUp('fast');\n\t\t\t}, 2500);\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('showAndHideMessage(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction switchTabs (whichType) {\n\t\ttry {\n\t\t\tif (whichType === 'preview') {\n\t\t\t\tif ( ! validateEmails( jQuery( '#fb-field-my-email' ).val() ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tjQuery('#tab-preview a').addClass('current');\n\t\t\t\tjQuery('#tab-settings a').removeClass('current');\n\t\t\t\tjQuery('#fb-preview-form, #fb-desc').show();\n\t\t\t\tjQuery('#fb-email-settings, #fb-email-desc').hide();\n\t\t\t\tshowAndHideMessage( GrunionFB_i18n.savedMessage );\n\n\t\t\t} else {\n\t\t\t\tjQuery('#tab-preview a').removeClass('current');\n\t\t\t\tjQuery('#tab-settings a').addClass('current');\n\t\t\t\tjQuery('#fb-preview-form, #fb-desc, #fb-add-field').hide();\n\t\t\t\tjQuery('#fb-email-settings, #fb-email-desc').show();\n\t\t\t\tjQuery('#fb-field-my-email').focus().select();\n\t\t\t}\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('switchTabs(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction validateEmails( emails ) {\n\t\t// Field is allowed to be empty :)\n\t\tif ( 0 === emails.length ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tvar $e, emailList = emails.split( ',' );\n\n\t\tfor ( $e = 0 ; $e < emailList.length ; $e++ ) {\n\t\t\tif ( false === validateEmail( emailList[ $e ] ) ) {\n\t\t\t\talert( emailList[ $e ] + GrunionFB_i18n.invalidEmail );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\t/* Uses The Official Standard: RFC 5322 -- http://www.regular-expressions.info/email.html */\n\tfunction validateEmail( email ) {\n\t\tvar re = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i;\n\t\treturn re.test( email );\n\t}\n\tfunction updateLabel () {\n\t\ttry {\n\t\t\tvar thisId = jQuery('#fb-field-id').val();\n\t\t\tvar thisLabel = jQuery('#fb-new-label').val();\n\t\t\t// Update preview\n\t\t\tif (thisLabel.length === 0) {\n\t\t\t\tjQuery('#fb-new-field' + thisId + ' label .label-text').text( GrunionFB_i18n.newLabel );\n\t\t\t} else {\n\t\t\t\tjQuery('#fb-new-field' + thisId + ' label .label-text').text( thisLabel );\n\t\t\t}\n\t\t\t// Update fbForm object\n\t\t\tfbForm.fields[thisId].label = thisLabel;\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('updateLabel(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateMyEmail () {\n\t\ttry {\n\t\t\tvar thisEmail = jQuery('#fb-field-my-email').val();\n\t\t\tfbForm.to = thisEmail;\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('updateMyEmail(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateOption (that) {\n\t\ttry {\n\t\t\tvar thisId = jQuery('#fb-field-id').val();\n\t\t\tvar thisOptionid = that.attr('optionid');\n\t\t\tvar thisOptionValue = that.val();\n\t\t\tvar thisType = jQuery('#fb-new-type').val();\n\t\t\t// Update preview\n\t\t\tif (thisType === 'radio') {\n\t\t\t\tjQuery('#fb-radio-' + thisId + '-' + thisOptionid + ' span').text(thisOptionValue);\n\t\t\t} else if ( 'checkbox-multiple' === thisType ) {\n\t\t\t\tjQuery('#fb-checkbox-multiple-' + thisId + '-' + thisOptionid + ' span').text(thisOptionValue);\n\t\t\t} else {\n\t\t\t\tjQuery('#fb-' + thisId + '-' + thisOptionid).text(thisOptionValue);\n\t\t\t}\n\t\t\t// Update fbForm object\n\t\t\tfbForm.fields[thisId].options[thisOptionid] = thisOptionValue;\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('updateOption(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateRequired () {\n\t\ttry {\n\t\t\tvar thisId = jQuery('#fb-field-id').val();\n\t\t\tvar thisChecked = jQuery('#fb-new-required').is(':checked');\n\t\t\t// Update object and preview\n\t\t\tif (thisChecked) {\n\t\t\t\tfbForm.fields[thisId].required = true;\n\t\t\t\tjQuery('#fb-new-field' + thisId + ' label').append('<span class=\"label-required\">' + GrunionFB_i18n.requiredLabel + '</span>');\n\t\t\t} else {\n\t\t\t\tfbForm.fields[thisId].required = false;\n\t\t\t\tjQuery('#fb-new-field' + thisId + ' label .label-required').remove();\n\t\t\t}\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('updateRequired(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateSubject () {\n\t\ttry {\n\t\t\tvar thisSubject = jQuery('#fb-field-subject').val();\n\t\t\tfbForm.subject = thisSubject;\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('updateSubject(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateType(thisType, thisLabelText, thisRequired) {\n\t\ttry {\n\t\t\tvar thisId = jQuery('#fb-field-id').val();\n\t\t\tif (!thisType) { thisType = jQuery('#fb-new-type').val(); }\n\t\t\tif (!thisLabelText) { thisLabelText = jQuery('#fb-new-field' + thisId + ' .label-text').text(); }\n\t\t\tvar isRequired = (thisRequired) ? '<span class=\"label-required\">' + GrunionFB_i18n.requiredLabel + '</span>' : '';\n\t\t\tvar thisLabel = '<label fieldid=\"' + thisId + '\" for=\"fb-field' +  thisId + '\"><span class=\"label-text\">' + FB.esc_html( thisLabelText ) + '</span>' + isRequired + '</label>';\n\t\t\tvar thisRadio = '<input type=\"radio\" name=\"radio-' + thisId + '\" id=\"fb-field' + thisId + ' \"disabled=\"disabled\" />';\n\t\t\tvar thisRadioLabel = '<label fieldid=\"' + thisId + '\" for=\"fb-field' +  thisId + '\" class=\"fb-radio-label\"><span class=\"label-text\">' + FB.esc_html( thisLabelText ) + '</span>' + isRequired + '</label>';\n\t\t\tvar thisRadioRemove = '<div class=\"fb-remove fb-remove-small\" id=\"' +  thisId + '\"></div>';\n\t\t\tvar thisRemove = '<div class=\"fb-remove\" id=\"' +  thisId + '\"></div>';\n\t\t\tvar thisCheckbox = '<input type=\"checkbox\" id=\"fb-field' + thisId + '\" \"disabled=\"disabled\" />';\n\t\t\tvar thisCheckboxMultiple = '<input type=\"checkbox\" id=\"fb-field' + thisId + '\" \"disabled=\"disabled\" />';\n\t\t\tvar thisCheckboxMultipleRemove = '<div class=\"fb-remove fb-remove-small\" id=\"' +  thisId + '\"></div>';\n\t\t\tvar thisText = '<input type=\"text\" id=\"fb-field' + thisId + '\" \"disabled=\"disabled\" />';\n\t\t\tvar thisTextarea = '<textarea id=\"fb-field' + thisId + '\" \"disabled=\"disabled\"></textarea>';\n\t\t\tvar thisClear = '<div class=\"clear\"></div>';\n\t\t\tvar thisSelect = '<select id=\"fb-field' + thisId + '\" fieldid=\"' + thisId + '\"><option id=\"fb-' + thisId + '-' + optionsCount + '\" value=\"' + thisId + '-' + optionsCount + '\">' + GrunionFB_i18n.firstOptionLabel + '</option></select>';\n\t\t\tswitch (thisType) {\n\t\t\t\tcase 'checkbox':\n\t\t\t\t\tremoveOptions();\n\t\t\t\t\tjQuery('#fb-new-field' + thisId + ' .fb-fields').html(thisRadioRemove + thisCheckbox + thisRadioLabel + thisClear);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'checkbox-multiple':\n\t\t\t\t\tjQuery('#fb-new-field' + thisId + ' .fb-fields').html(thisLabel + thisCheckboxMultipleRemove + '<div fieldid=\"' + thisId + '\" id=\"fb-custom-checkbox-multiple' + thisId + '\"></div>');\n\t\t\t\t\tif (optionsCache[thisId] !== undefined && optionsCache[thisId].options.length !== 0) {\n\t\t\t\t\t\tfbForm.fields[thisId].options = optionsCache[thisId].options;\n\t\t\t\t\t\tjQuery('#fb-custom-checkbox-multiple' + thisId).append(customOptions(thisId, thisType));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjQuery('#fb-new-options').html('<label for=\"fb-option0\">' + GrunionFB_i18n.optionsLabel + '</label><input type=\"text\" id=\"fb-option0\" optionid=\"0\" value=\"' + GrunionFB_i18n.firstOptionLabel + '\" class=\"fb-options\" />');\n\t\t\t\t\t\tjQuery('#fb-custom-checkbox-multiple' + thisId).append('<div id=\"fb-checkbox-multiple-' + thisId + '-0\">' + thisCheckboxMultiple + '<span>' + GrunionFB_i18n.firstOptionLabel + '</span>' + thisClear + '</div>');\n\t\t\t\t\t\tfbForm.fields[thisId].options[optionsCount] = GrunionFB_i18n.firstOptionLabel;\n\t\t\t\t\t}\n\t\t\t\t\tjQuery('#fb-options').show();\n\t\t\t\t\tsetTimeout(function () { jQuery('#fb-option0').focus().select(); }, 100);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'email':\n\t\t\t\t\tremoveOptions();\n\t\t\t\t\tjQuery('#fb-new-field' + thisId + ' .fb-fields').html(thisRemove + thisLabel + thisText);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'name':\n\t\t\t\t\tremoveOptions();\n\t\t\t\t\tjQuery('#fb-new-field' + thisId + ' .fb-fields').html(thisRemove + thisLabel + thisText);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'radio':\n\t\t\t\t\tjQuery('#fb-new-field' + thisId + ' .fb-fields').html(thisLabel + thisRadioRemove + '<div fieldid=\"' + thisId + '\" id=\"fb-custom-radio' + thisId + '\"></div>');\n\t\t\t\t\tif (optionsCache[thisId] !== undefined && optionsCache[thisId].options.length !== 0) {\n\t\t\t\t\t\tfbForm.fields[thisId].options = optionsCache[thisId].options;\n\t\t\t\t\t\tjQuery('#fb-custom-radio' + thisId).append(customOptions(thisId, thisType));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjQuery('#fb-new-options').html('<label for=\"fb-option0\">' + GrunionFB_i18n.optionsLabel + '</label><input type=\"text\" id=\"fb-option0\" optionid=\"0\" value=\"' + GrunionFB_i18n.firstOptionLabel + '\" class=\"fb-options\" />');\n\t\t\t\t\t\tjQuery('#fb-custom-radio' + thisId).append('<div id=\"fb-radio-' + thisId + '-0\">' + thisRadio + '<span>' + GrunionFB_i18n.firstOptionLabel + '</span>' + thisClear + '</div>');\n\t\t\t\t\t\tfbForm.fields[thisId].options[optionsCount] = GrunionFB_i18n.firstOptionLabel;\n\t\t\t\t\t}\n\t\t\t\t\tjQuery('#fb-options').show();\n\t\t\t\t\tsetTimeout(function () { jQuery('#fb-option0').focus().select(); }, 100);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'select':\n\t\t\t\t\tjQuery('#fb-new-field' + thisId + ' .fb-fields').html(thisRemove + thisLabel + thisSelect);\n\t\t\t\t\tif (optionsCache[thisId] !== undefined && optionsCache[thisId].options.length !== 0) {\n\t\t\t\t\t\tfbForm.fields[thisId].options = optionsCache[thisId].options;\n\t\t\t\t\t\tjQuery('#fb-field' + thisId).html(customOptions(thisId, thisType));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjQuery('#fb-new-options').html('<label for=\"fb-option0\">' + GrunionFB_i18n.optionsLabel + '</label><input type=\"text\" id=\"fb-option0\" optionid=\"0\" value=\"' + GrunionFB_i18n.firstOptionLabel + '\" class=\"fb-options\" />');\n\t\t\t\t\t\tfbForm.fields[thisId].options[optionsCount] = GrunionFB_i18n.firstOptionLabel;\n\t\t\t\t\t}\n\t\t\t\t\tjQuery('#fb-options').show();\n\t\t\t\t\tsetTimeout(function () { jQuery('#fb-option0').focus().select(); }, 100);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'text':\n\t\t\t\t\tremoveOptions();\n\t\t\t\t\tjQuery('#fb-new-field' + thisId + ' .fb-fields').html(thisRemove + thisLabel + thisText);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'textarea':\n\t\t\t\t\tremoveOptions();\n\t\t\t\t\tjQuery('#fb-new-field' + thisId + ' .fb-fields').html(thisRemove + thisLabel + thisTextarea);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'url':\n\t\t\t\t\tremoveOptions();\n\t\t\t\t\tjQuery('#fb-new-field' + thisId + ' .fb-fields').html(thisRemove + thisLabel + thisText);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// update object\n\t\t\tfbForm.fields[thisId].type = thisType;\n\t\t} catch(e) {\n\t\t\tif (debug) {\n\t\t\t\tconsole.log('updateType(): ' + e);\n\t\t\t}\n\t\t}\n\t}\n\treturn {\n\t\tresizePop: function () {\n\t\t\ttry {\n\t\t\t\t//Thickbox won't resize for some reason, we are manually doing it here\n\t\t\t\tvar totalWidth = jQuery('body', window.parent.document).width();\n\t\t\t\tvar totalHeight = jQuery('body', window.parent.document).height();\n\t\t\t\tvar isIE6 = typeof document.body.style.maxHeight === 'undefined';\n\n\t\t\t\tjQuery('#TB_window, #TB_iframeContent', window.parent.document).css('width', '768px');\n\t\t\t\tjQuery('#TB_window', window.parent.document).css({ left: (totalWidth-768)/2 + 'px', top: '23px', position: 'absolute', marginLeft: '0' });\n\t\t\t\tif ( ! isIE6 ) { // take away IE6\n\t\t\t\t\tjQuery('#TB_window, #TB_iframeContent', window.parent.document).css('height', (totalHeight-73) + 'px');\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\tif (debug) {\n\t\t\t\t\tconsole.log('resizePop(): ' + e);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tinit: function () {\n\t\t\t// Scroll to top of page\n\t\t\twindow.parent.scroll(0,0);\n\t\t\t//Check for existing form data\n\t\t\tvar contentSource;\n\t\t\tif (jQuery('#edButtonPreview', window.parent.document).hasClass('active') || jQuery( '#wp-content-wrap', window.parent.document ).hasClass( 'tmce-active' ) ) {\n\t\t\t\tvar win = window.dialogArguments || opener || parent || top;\n\t\t\t\tcontentSource = win.tinyMCE.activeEditor.getContent();\n\t\t\t} else {\n\t\t\t\tcontentSource = jQuery('#content', window.parent.document).val();\n\t\t\t}\n\t\t\tvar data = {\n\t\t\t\taction: 'grunion_shortcode_to_json',\n\t\t\t\t'_ajax_nonce' : ajax_nonce_json,\n\t\t\t\tpost_id: postId,\n\t\t\t\tcontent: contentSource\n\t\t\t};\n\n\t\t\tvar $doc = jQuery(document);\n\n\t\t\tjQuery.post(ajaxurl, data, function(response) {\n\t\t\t\t// Setup fbForm\n\t\t\t\tparseShortcode(jQuery.parseJSON(response));\n\t\t\t\t// Now build out the preview form\n\t\t\t\tbuildPreview();\n\t\t\t});\n\t\t\t// actions\n\t\t\tjQuery('.fb-add-field').click(function () {\n\t\t\t\taddField();\n\t\t\t\thideDesc();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tjQuery('#fb-new-label').keyup(function () {\n\t\t\t\tupdateLabel();\n\t\t\t});\n\t\t\tjQuery('#fb-new-type').change(function () {\n\t\t\t\tupdateType();\n\t\t\t});\n\t\t\tjQuery('#fb-new-required').click(function () {\n\t\t\t\tupdateRequired();\n\t\t\t});\n\t\t\t$doc.on('click', '.fb-remove', function () {\n\t\t\t\tshowDesc();\n\t\t\t\tdeleteField(jQuery(this));\n\t\t\t\tgrabShortcode();\n\t\t\t});\n\t\t\tjQuery('#fb-preview').submit(function () {\n\t\t\t\tsendShortcodeToEditor();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tjQuery('#TB_overlay, #TB_closeWindowButton', window.parent.document).mousedown(function () {\n\t\t\t\tif(confirm( GrunionFB_i18n.exitConfirmMessage )) {\n\t\t\t\t\thidePopup();\n\t\t\t\t}\n\t\t\t});\n\t\t\t$doc.on('click', '#fb-another-option', function () {\n\t\t\t\taddOption();\n\t\t\t});\n\t\t\t$doc.on('keyup', '.fb-options', function () {\n\t\t\t\tupdateOption(jQuery(this));\n\t\t\t});\n\t\t\t$doc.on('click', '.fb-remove-option', function () {\n\t\t\t\tremoveOption(jQuery(this).attr('optionid'));\n\t\t\t});\n\t\t\tjQuery('#tab-preview a').click(function () {\n\t\t\t\tswitchTabs('preview');\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tjQuery('#fb-prev-form').click(function () {\n\t\t\t\tswitchTabs('preview');\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tjQuery('#tab-settings a').click(function () {\n\t\t\t\tswitchTabs();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tjQuery('#fb-field-my-email').blur(function () {\n\t\t\t\tupdateMyEmail();\n\t\t\t});\n\t\t\tjQuery('#fb-field-subject').blur(function () {\n\t\t\t\tupdateSubject();\n\t\t\t});\n\t\t\t$doc.on('mouseenter', '.fb-form-case .fb-new-fields', function () {\n\t\t\t\thideShowEditLink('show', jQuery(this));\n\t\t\t});\n\t\t\t$doc.on('mouseleave', '.fb-form-case .fb-new-fields', function () {\n\t\t\t\thideShowEditLink('hide');\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\t$doc.on('click', '.fb-edit-field', function () {\n\t\t\t\teditField(jQuery(this));\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\t$doc.on('click', '.fb-edit-field .fb-reorder', function () {\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\t$doc.on('click', '#fb-save-field', function () {\n\t\t\t\tshowDesc();\n\t\t\t\tshowAndHideMessage();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tjQuery('#fb-feedback').click(function () {\n\t\t\t\tvar thisHref = jQuery(this).attr('href');\n\t\t\t\twindow.parent.location = thisHref;\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tjQuery('#sortable').sortable({\n\t\t\t\taxis: 'y',\n\t\t\t\thandle: '.fb-reorder',\n\t\t\t\trevert: true,\n\t\t\t\tstart: function() { jQuery('.fb-edit-field').hide(); }\n\t\t\t});\n\t\t\tjQuery('#draggable').draggable({\n\t\t\t\taxis: 'y',\n\t\t\t\thandle: '.fb-reorder',\n\t\t\t\tconnectToSortable: '#sortable',\n\t\t\t\thelper: 'clone',\n\t\t\t\trevert: 'invalid'\n\t\t\t});\n\t\t}\n\t};\n})();\n"]}