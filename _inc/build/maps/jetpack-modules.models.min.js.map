{"version":3,"sources":["jetpack-modules.models.js"],"names":["this","jetpackModules","window","models","$","_","Backbone","Modules","Model","extend","visibles","filter_and_sort","groups","subsubsub","items","get","m_filter","m_sort","m_search","val","toLowerCase","closest","hasClass","filter","item","contains","module_tags","data","length","name","description","long_description","search_terms","jumpstart_desc","indexOf","sortBy","reverse","groupBy","has","concat","set","initialize","jQuery"],"mappings":";AAEAA,KAAKC,eAAiBD,KAAKC,mBAE3BC,OAAOD,eAAeE,OAAS,SAAWD,EAAQE,EAAGC,EAAGC,GACtD,YAEA,IAAIH,KA+DJ,OA7DAA,GAAOI,QAAUD,EAASE,MAAMC,QAC/BC,YAMAC,gBAAkB,WACjB,GAKCC,GALGC,EAAYT,EAAE,uBACjBU,EAAYd,KAAKe,IAAK,OACtBC,EAAYZ,EAAE,uCACda,EAAYb,EAAE,8BACdc,EAAYd,EAAE,2BAA2Be,MAAMC,aAuChD,OAnCOP,GAAUQ,QAAQ,MAAMC,SAAU,SACxCR,EAAQT,EAAEkB,OAAQT,EAAO,SAAUU,GAClC,MAAOnB,GAAEoB,SAAUD,EAAKE,YAAab,EAAUc,KAAM,aAIlDX,EAASW,KAAK,eAClBb,EAAQT,EAAEkB,OAAQT,EAAO,SAAUU,GAClC,MAAOA,GAAMR,EAASW,KAAK,gBAAmBX,EAASW,KAAK,mBAIzDT,EAASU,SACbd,EAAQT,EAAEkB,OAAQT,EAAO,SAAUU,GAElC,OAAU,KADQA,EAAKK,KAAO,IAAML,EAAKM,YAAc,IAAMN,EAAKO,iBAAmB,IAAMP,EAAKQ,aAAe,IAAMR,EAAKS,eAAiB,IAAMT,EAAKE,aAC1HN,cAAcc,QAAShB,MAIhDD,EAAOU,KAAK,aAChBb,EAAQT,EAAE8B,OAAQrB,EAAOG,EAAOU,KAAK,YAChC,YAAcV,EAAOU,KAAK,eAC9Bb,EAAMsB,WAKRxB,EAASP,EAAEgC,QAASvB,EAAO,aACtBT,EAAEiC,IAAK1B,EAAQ,WACnBE,KAAWyB,OAAQ3B,GAAO,GAAOA,GAAO,KAIzCZ,KAAKwC,IAAK,QAAS1B,GAEZd,MAGRyC,WAAa,WACZ,GAAI3B,GAAQd,KAAKe,IAAK,QACtBf,MAAKwC,IAAK,MAAO1B,MAKZX,GAELH,EAAM0C,OAAQrC,EAAGC","file":"../jetpack-modules.models.min.js","sourcesContent":["/* Do not modify this file directly. It is compiled from other files. */\n\nthis.jetpackModules = this.jetpackModules || {};\n\nwindow.jetpackModules.models = (function( window, $, _, Backbone ) {\n\t\t'use strict';\n\n\t\tvar models = {};\n\n\t\tmodels.Modules = Backbone.Model.extend({\n\t\t\tvisibles : {},\n\n\t\t\t/**\n\t\t\t* Updates modules.items dataset to be a reflection of both the current\n\t\t\t* modules.raw data, as well as any filters or sorting that may be in effect.\n\t\t\t*/\n\t\t\tfilter_and_sort : function() {\n\t\t\t\tvar subsubsub = $('.subsubsub .current'),\n\t\t\t\t\titems     = this.get( 'raw' ),\n\t\t\t\t\tm_filter  = $('.button-group.filter-active .active'),\n\t\t\t\t\tm_sort    = $('.button-group.sort .active'),\n\t\t\t\t\tm_search  = $('#srch-term-search-input').val().toLowerCase(),\n\t\t\t\t\tgroups;\n\n\t\t\t\t// If a module filter has been selected, filter it!\n\t\t\t\tif ( ! subsubsub.closest('li').hasClass( 'all' ) ) {\n\t\t\t\t\titems = _.filter( items, function( item ) {\n\t\t\t\t\t\treturn _.contains( item.module_tags, subsubsub.data( 'title' ) );\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tif ( m_filter.data('filter-by') ) {\n\t\t\t\t\titems = _.filter( items, function( item ) {\n\t\t\t\t\t\treturn item[ m_filter.data('filter-by') ] === m_filter.data('filter-value');\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tif ( m_search.length ) {\n\t\t\t\t\titems = _.filter( items, function( item ) {\n\t\t\t\t\t\tvar search_text = item.name + ' ' + item.description + ' ' + item.long_description + ' ' + item.search_terms + ' ' + item.jumpstart_desc + ' ' + item.module_tags;\n\t\t\t\t\t\treturn ( -1 !== search_text.toLowerCase().indexOf( m_search ) );\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tif ( m_sort.data('sort-by') ) {\n\t\t\t\t\titems = _.sortBy( items, m_sort.data('sort-by') );\n\t\t\t\t\tif ( 'reverse' === m_sort.data('sort-order') ) {\n\t\t\t\t\t\titems.reverse();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Sort unavailable modules to the end if the user is running in local mode.\n\t\t\t\tgroups = _.groupBy( items, 'available' );\n\t\t\t\tif ( _.has( groups, 'false' ) ) {\n\t\t\t\t\titems = [].concat( groups[true], groups[false] );\n\t\t\t\t}\n\n\t\t\t\t// Now shove it back in.\n\t\t\t\tthis.set( 'items', items );\n\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\tinitialize : function() {\n\t\t\t\tvar items = this.get( 'items' );\n\t\t\t\tthis.set( 'raw', items );\n\t\t\t}\n\n\t\t});\n\n\t\treturn models;\n\n})( this, jQuery, _, Backbone );\n"]}