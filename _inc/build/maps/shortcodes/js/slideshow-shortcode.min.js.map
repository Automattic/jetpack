{"version":3,"sources":["shortcodes/js/slideshow-shortcode.js"],"names":["JetpackSlideshow","element","transition","autostart","this","images","controls","prototype","showLoadingImage","toggle","loadingImage_","document","createElement","className","img","src","jetpackSlideshowSettings","spinner","appendChild","makeZeroWidthSpan","append","parentNode","removeChild","init","self","i","length","imageInfo","title","alt","align","setAttribute","nopin","caption","innerHTML","container","complete","setTimeout","finishInit_","jQuery","load","removeAttribute","emptySpan","window","navigator","userAgent","indexOf","createTextNode","renderControls_","cycle","fx","prev","next","timeout","speed","slideExpr","onPrevNextEvent","onCyclePrevNextClick_","apply","arguments","slideshow","stop","removeClass","addClass","click","button","hasClass","children","show","css","initialized_","controlsDiv_","controlsDiv","controlName","a","href","isNext","blog_id","postid","id","Image","location","protocol","escape","host","Math","random","blog_subdomain","user_id","$","jetpack_slideshow_init","remove","each","data","ready","on"],"mappings":"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","file":"../../../shortcodes/js/slideshow-shortcode.min.js","sourcesContent":["/* Do not modify this file directly. It is compiled from other files. */\n/* jshint onevar:false, loopfunc:true */\n/* global jetpackSlideshowSettings, escape */\n\nfunction JetpackSlideshow( element, transition, autostart ) {\n\tthis.element = element;\n\tthis.images = [];\n\tthis.controls = {};\n\tthis.transition = transition || 'fade';\n\tthis.autostart = autostart;\n}\n\nJetpackSlideshow.prototype.showLoadingImage = function( toggle ) {\n\tif ( toggle ) {\n\t\tthis.loadingImage_ = document.createElement( 'div' );\n\t\tthis.loadingImage_.className = 'slideshow-loading';\n\t\tvar img = document.createElement( 'img' );\n\t\timg.src = jetpackSlideshowSettings.spinner;\n\t\tthis.loadingImage_.appendChild( img );\n\t\tthis.loadingImage_.appendChild( this.makeZeroWidthSpan() );\n\t\tthis.element.append( this.loadingImage_ );\n\t} else if ( this.loadingImage_ ) {\n\t\tthis.loadingImage_.parentNode.removeChild( this.loadingImage_ );\n\t\tthis.loadingImage_ = null;\n\t}\n};\n\nJetpackSlideshow.prototype.init = function() {\n\tthis.showLoadingImage(true);\n\n\tvar self = this;\n\t// Set up DOM.\n\tfor ( var i = 0; i < this.images.length; i++ ) {\n\t\tvar imageInfo = this.images[i];\n\t\tvar img = document.createElement( 'img' );\n\t\timg.src = imageInfo.src;\n\t\timg.title = typeof( imageInfo.title ) !== 'undefined' ? imageInfo.title : '';\n\t\timg.alt = typeof( imageInfo.alt ) !== 'undefined' ? imageInfo.alt : '';\n\t\timg.align = 'middle';\n\t\timg.setAttribute('itemprop','image');\n\t\timg.nopin = 'nopin';\n\t\tvar caption = document.createElement( 'div' );\n\t\tcaption.className = 'slideshow-slide-caption';\n\t\tcaption.setAttribute('itemprop','caption description');\n\t\tcaption.innerHTML = imageInfo.caption;\n\t\tvar container = document.createElement('div');\n\t\tcontainer.className = 'slideshow-slide';\n\t\tcontainer.setAttribute('itemprop','associatedMedia');\n\t\tcontainer.setAttribute('itemscope','');\n\t\tcontainer.setAttribute('itemtype','https://schema.org/ImageObject');\n\n\t\t// Hide loading image once first image has loaded.\n\t\tif ( i === 0 ) {\n\t\t\tif ( img.complete ) {\n\t\t\t\t// IE, image in cache\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tself.finishInit_();\n\t\t\t\t}, 1);\n\t\t\t} else {\n\t\t\t\tjQuery( img ).load(function() {\n\t\t\t\t\tself.finishInit_();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tcontainer.appendChild( img );\n\t\t// I'm not sure where these were coming from, but IE adds\n\t\t// bad values for width/height for portrait-mode images\n\t\timg.removeAttribute('width');\n\t\timg.removeAttribute('height');\n\t\tcontainer.appendChild( this.makeZeroWidthSpan() );\n\t\tcontainer.appendChild( caption );\n\t\tthis.element.append( container );\n\t}\n};\n\nJetpackSlideshow.prototype.makeZeroWidthSpan = function() {\n\tvar emptySpan = document.createElement( 'span' );\n\temptySpan.className = 'slideshow-line-height-hack';\n\t// Having a NBSP makes IE act weird during transitions, but other\n\t// browsers ignore a text node with a space in it as whitespace.\n\tif ( -1 !== window.navigator.userAgent.indexOf( 'MSIE ' ) ) {\n\t\temptySpan.appendChild( document.createTextNode(' ') );\n\t} else {\n\t\temptySpan.innerHTML = '&nbsp;';\n\t}\n\treturn emptySpan;\n};\n\nJetpackSlideshow.prototype.finishInit_ = function() {\n\tthis.showLoadingImage( false );\n\tthis.renderControls_();\n\n\tvar self = this;\n\tif ( this.images.length > 1 ) {\n\t\t// Initialize Cycle instance.\n\t\tthis.element.cycle( {\n\t\t\tfx: this.transition,\n\t\t\tprev: this.controls.prev,\n\t\t\tnext: this.controls.next,\n\t\t\ttimeout: jetpackSlideshowSettings.speed,\n\t\t\tslideExpr: '.slideshow-slide',\n\t\t\tonPrevNextEvent: function() {\n\t\t\t\treturn self.onCyclePrevNextClick_.apply( self, arguments );\n\t\t\t}\n\t\t} );\n\n\t\tvar slideshow = this.element;\n\n\t\tif ( ! this.autostart ) {\n\t\t\tslideshow.cycle( 'pause' );\n\t\t\tjQuery(this.controls.stop).removeClass( 'running' );\n\t\t\tjQuery(this.controls.stop).addClass( 'paused' );\n\t\t}\n\n\t\tjQuery( this.controls.stop ).click( function() {\n\t\t\tvar button = jQuery(this);\n\t\t\tif ( ! button.hasClass( 'paused' ) ) {\n\t\t\t\tslideshow.cycle( 'pause' );\n\t\t\t\tbutton.removeClass( 'running' );\n\t\t\t\tbutton.addClass( 'paused' );\n\t\t\t} else {\n\t\t\t\tbutton.addClass( 'running' );\n\t\t\t\tbutton.removeClass( 'paused' );\n\t\t\t\tslideshow.cycle( 'resume', true );\n\t\t\t}\n\t\t\treturn false;\n\t\t} );\n\t} else {\n\t\tthis.element.children( ':first' ).show();\n\t\tthis.element.css( 'position', 'relative' );\n\t}\n\tthis.initialized_ = true;\n};\n\nJetpackSlideshow.prototype.renderControls_ = function() {\n\tif ( this.controlsDiv_ ) {\n\t\treturn;\n\t}\n\n\tvar controlsDiv = document.createElement( 'div' );\n\tcontrolsDiv.className = 'slideshow-controls';\n\n\tvar controls = [ 'prev', 'stop', 'next' ];\n\tfor ( var i = 0; i < controls.length; i++ ) {\n\t\tvar controlName = controls[i];\n\t\tvar a = document.createElement( 'a' );\n\t\ta.href = '#';\n\t\tcontrolsDiv.appendChild( a );\n\t\tthis.controls[controlName] = a;\n\t}\n\tthis.element.append( controlsDiv );\n\tthis.controlsDiv_ = controlsDiv;\n};\n\nJetpackSlideshow.prototype.onCyclePrevNextClick_ = function( isNext, i/*, slideElement*/ ) {\n\t// If blog_id not present don't track page views\n\tif ( ! jetpackSlideshowSettings.blog_id ) {\n\t\treturn;\n\t}\n\n\tvar postid = this.images[i].id;\n\tvar stats = new Image();\n\tstats.src = document.location.protocol +\n\t\t'//pixel.wp.com/g.gif?host=' +\n\t\tescape( document.location.host ) +\n\t\t'&rand=' + Math.random() +\n\t\t'&blog=' + jetpackSlideshowSettings.blog_id +\n\t\t'&subd=' + jetpackSlideshowSettings.blog_subdomain +\n\t\t'&user_id=' + jetpackSlideshowSettings.user_id +\n\t\t'&post=' + postid +\n\t\t'&ref=' + escape( document.location );\n};\n\n( function ( $ ) {\n\tfunction jetpack_slideshow_init() {\n\t\t$( '.jetpack-slideshow-noscript' ).remove();\n\n\t\t$( '.jetpack-slideshow' ).each( function () {\n\t\t\tvar container = $( this );\n\n\t\t\tif ( container.data( 'processed' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar slideshow = new JetpackSlideshow( container, container.data( 'trans' ), container.data( 'autostart' ) );\n\t\t\tslideshow.images = container.data( 'gallery' );\n\t\t\tslideshow.init();\n\n\t\t\tcontainer.data( 'processed', true );\n\t\t} );\n\t}\n\n\t$( document ).ready( jetpack_slideshow_init );\n\t$( 'body' ).on( 'post-load', jetpack_slideshow_init );\n} )( jQuery );\n"]}