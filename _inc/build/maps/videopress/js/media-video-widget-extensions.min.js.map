{"version":3,"sources":["videopress/js/media-video-widget-extensions.js"],"names":["window","wp","mediaWidgets","controlConstructors","media_video","prototype","mapMediaToModelProps","originalMapMediaToModelProps","mediaFrameProps","newProps","originalProps","videoPressGuid","call","this","_","extend","videopress","guid","videopress_guid","length","url","attachment_id","isHostedVideo","originalIsHostedVideo","parsedUrl","document","createElement","href","hostname"],"mappings":";AACAA,OAAOC,GAAKD,OAAOC,OAEnB,SAAYA,GACNA,EAAGC,eAGPD,EAAGC,aAAaC,oBAAoBC,YAAYC,UAAUC,qBAAyB,SAAUC,GAC5F,MAAO,UAAUC,GAChB,GAAIC,GAAUC,EAAeC,CAoB7B,OAnBAD,GAAgBH,EAA6BK,KAAMC,KAAML,GACzDC,EAAWK,EAAEC,UAAYL,GAGpBF,EAAgBQ,YAAcR,EAAgBQ,WAAWC,OAC7DN,EAAiBH,EAAgBQ,WAAWC,OAItCN,GAAkBH,EAAgBU,iBAAmBV,EAAgBU,gBAAgBC,SAC3FR,EAAiBH,EAAgBU,gBAAiB,IAG9CP,IACJF,EAAWK,EAAEC,UAAYL,GACxBU,IAAK,4BAA8BT,EACnCU,cAAe,KAGVZ,IAENR,EAAGC,aAAaC,oBAAoBC,YAAYC,UAAUC,sBAG7DL,EAAGC,aAAaC,oBAAoBC,YAAYC,UAAUiB,cAAiB,SAAUC,GACpF,MAAO,UAAUH,GAChB,GAAII,GAAYC,SAASC,cAAe,IAExC,OADAF,GAAUG,KAAOP,EACZ,mBAAqBI,EAAUI,UAG7BL,EAAsBX,KAAMC,KAAMO,KAExCnB,EAAGC,aAAaC,oBAAoBC,YAAYC,UAAUiB,iBAE1DtB,OAAOC","file":"../../../videopress/js/media-video-widget-extensions.min.js","sourcesContent":["/* Do not modify this file directly. It is compiled from other files. */\nwindow.wp = window.wp || {};\n\n( function( wp ) {\n\tif ( wp.mediaWidgets ) {\n\t\t\n\t\t// Over-ride core media_video#mapMediaToModelProps to set the url based upon videopress_guid if it exists.\n\t\twp.mediaWidgets.controlConstructors.media_video.prototype.mapMediaToModelProps = ( function( originalMapMediaToModelProps ) {\n\t\t\treturn function( mediaFrameProps ) {\n\t\t\t\tvar newProps, originalProps, videoPressGuid;\n\t\t\t\toriginalProps = originalMapMediaToModelProps.call( this, mediaFrameProps );\n\t\t\t\tnewProps = _.extend( {}, originalProps );\n\t\t\t\t\n\t\t\t\t// API response on new media will have the guid at videopress.guid.\n\t\t\t\tif ( mediaFrameProps.videopress && mediaFrameProps.videopress.guid ) {\n\t\t\t\t\tvideoPressGuid = mediaFrameProps.videopress.guid;\n\t\t\t\t}\n\n\t\t\t\t// Selecting an existing VideoPress file will have the guid at .videopress_guid[ 0 ].\n\t\t\t\tif ( ! videoPressGuid && mediaFrameProps.videopress_guid && mediaFrameProps.videopress_guid.length ) {\n\t\t\t\t\tvideoPressGuid = mediaFrameProps.videopress_guid[ 0 ];\n\t\t\t\t}\n\n\t\t\t\tif ( videoPressGuid ) {\n\t\t\t\t\tnewProps = _.extend( {}, originalProps, {\n\t\t\t\t\t\turl: 'https://videopress.com/v/' + videoPressGuid,\n\t\t\t\t\t\tattachment_id: 0\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn newProps;\n\t\t\t};\n\t\t}( wp.mediaWidgets.controlConstructors.media_video.prototype.mapMediaToModelProps ));\n\n\t\t// Over-ride core media_video#isHostedVideo() to add support for videopress oembed urls.\n\t\twp.mediaWidgets.controlConstructors.media_video.prototype.isHostedVideo = (function( originalIsHostedVideo ) {\n\t\t\treturn function( url ) {\n\t\t\t\tvar parsedUrl = document.createElement( 'a' );\n\t\t\t\tparsedUrl.href = url;\n\t\t\t\tif ( 'videopress.com' === parsedUrl.hostname ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn originalIsHostedVideo.call( this, url );\n\t\t\t};\n\t\t}( wp.mediaWidgets.controlConstructors.media_video.prototype.isHostedVideo ));\n\t}\n} )( window.wp );\n"]}