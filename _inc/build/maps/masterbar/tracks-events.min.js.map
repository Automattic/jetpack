{"version":3,"sources":["masterbar/tracks-events.js"],"names":["$","parseJson","s","defaultValue","JSON","parse","e","linksTracksEvents","wp-admin-bar-blog","wp-admin-bar-newdash","wp-admin-bar-ab-new-post","wp-admin-bar-my-account","wp-admin-bar-notes","wp-admin-bar-switch-site","wp-admin-bar-blog-info","wp-admin-bar-site-view","wp-admin-bar-blog-stats","wp-admin-bar-activity","wp-admin-bar-plan","wp-admin-bar-plan-badge","wp-admin-bar-edit-page","wp-admin-bar-new-page-badge","wp-admin-bar-edit-post","wp-admin-bar-new-post-badge","wp-admin-bar-edit-attachment","wp-admin-bar-new-attachment-badge","wp-admin-bar-comments","wp-admin-bar-edit-testimonial","wp-admin-bar-new-testimonial","wp-admin-bar-edit-portfolio","wp-admin-bar-new-portfolio","wp-admin-bar-themes","wp-admin-bar-cmz","wp-admin-bar-sharing","wp-admin-bar-people","wp-admin-bar-people-add","wp-admin-bar-plugins","wp-admin-bar-plugins-add","wp-admin-bar-blog-settings","wp-admin-bar-followed-sites","wp-admin-bar-reader-followed-sites-manage","wp-admin-bar-discover-discover","wp-admin-bar-discover-search","wp-admin-bar-discover-recommended-blogs","wp-admin-bar-my-activity-my-likes","wp-admin-bar-user-info","wp-admin-bar-my-profile","wp-admin-bar-account-settings","wp-admin-bar-billing","wp-admin-bar-security","wp-admin-bar-notifications","wp-admin-bar-get-apps","wp-admin-bar-next-steps","wp-admin-bar-help","notesTracksEvents","openSite","data","clicked","site_id","siteId","openPost","post_id","postId","openComment","comment_id","commentId","document","ready","on","window","jpTracksAJAX","$target","target","$parent","closest","is","trackingId","attr","hasOwnProperty","eventProps","hasClass","record_ajax_event","preventDefault","always","location","event","originalEvent","origin","type","eventData","action","jQuery"],"mappings":";;CAEA,SAAYA,GAqFX,QAASC,GAAWC,EAAGC,GACtB,IACC,MAAOC,MAAKC,MAAOH,GAClB,MAAQI,GACT,MAAOH,IAxFT,GAEII,IAEHC,oBAA6C,WAC7CC,uBAA6C,SAC7CC,2BAA6C,eAC7CC,0BAA6C,aAC7CC,qBAA6C,gBAE7CC,2BAA6C,uBAC7CC,yBAA6C,qBAC7CC,yBAA6C,qBAC7CC,0BAA6C,sBAC7CC,wBAA6C,oBAC7CC,oBAA6C,gBAC7CC,0BAA6C,sBAE7CC,yBAA6C,6BAC7CC,8BAA6C,2BAC7CC,yBAA6C,6BAC7CC,8BAA6C,+BAC7CC,+BAA6C,wBAC7CC,oCAA6C,4BAC7CC,wBAA6C,2BAC7CC,gCAA6C,+BAC7CC,+BAA6C,kCAC7CC,8BAA6C,4BAC7CC,6BAA6C,gCAE7CC,sBAA6C,8BAC7CC,mBAA6C,wCAE7CC,uBAA6C,6BAC7CC,sBAA6C,4BAC7CC,0BAA6C,uCAC7CC,uBAA6C,6BAC7CC,2BAA6C,oCAC7CC,6BAA6C,8BAE7CC,8BAA6C,wBAC7CC,4CAA6C,+BAC7CC,iCAA6C,kBAC7CC,+BAA6C,gBAC7CC,0CAA6C,yBAC7CC,oCAA6C,kBAE7CC,yBAA6C,uBAE7CC,0BAA6C,gCAC7CC,gCAA6C,sCAC7CC,uBAA6C,sCAC7CC,wBAA6C,8BAC7CC,6BAA6C,mCAE7CC,wBAA6C,8BAC7CC,0BAA6C,gCAC7CC,oBAA6C,2BAG1CC,GACHC,SAAU,SAAUC,GACnB,OACCC,QAAS,qCACTC,QAASF,EAAKG,SAGhBC,SAAU,SAAUJ,GACnB,OACCC,QAAS,qCACTC,QAASF,EAAKG,OACdE,QAASL,EAAKM,SAGhBC,YAAa,SAAUP,GACtB,OACCC,QAAS,wCACTC,QAASF,EAAKG,OACdE,QAASL,EAAKM,OACdE,WAAYR,EAAKS,YAapBjE,GAAGkE,UAAWC,MAAO,WAMpBnE,EALqB,6HAKDoE,GAAI,mBAAoB,SAAU9D,GACrD,GAAO+D,OAAOC,cAAgB,kBAAuBD,QAAOC,aAA+B,kBAA3F,CAIA,GAAIC,GAAUvE,EAAGM,EAAEkE,QACjBC,EAAUF,EAAQG,QAAS,KAM7B,IAJOH,EAAQI,GAAI,OAClBJ,EAAUA,EAAQG,QAAS,MAGrBD,GAAaF,EAApB,CAIA,GAAIK,GAAaL,EAAQM,KAAM,OAAUJ,EAAQI,KAAM,KAEvD,IAAOtE,EAAkBuE,eAAgBF,GAAzC,CAGA,GAAIG,IAAetB,QAAWlD,EAAmBqE,GAE5CH,GAAQO,SAAU,WACtBX,OAAOC,aAAaW,kBA1HP,kBA0HqC,QAASF,IAE3DzE,EAAE4E,iBACFb,OAAOC,aAAaW,kBA7HP,kBA6HqC,QAASF,GAAaI,OAAQ,WAC/Ed,OAAOe,SAAWb,EAAQM,KAAM,kBAOpC7E,EAAGqE,QAASD,GAAI,UAAW,SAAU9D,GACpC,GAAO+D,OAAOC,cAAgB,kBAAuBD,QAAOC,aAA+B,kBAA3F,CAIA,GAAIe,IAAU/E,EAAEkD,MAAQlD,EAAEgF,cAAc9B,KAAOlD,EAAEgF,cAAgBhF,CACjE,IAAsB,2BAAjB+E,EAAME,OAAX,CAIA,GAAI/B,GAAS,gBAAoB6B,GAAM7B,KAASvD,EAAWoF,EAAM7B,SAAa6B,EAAM7B,IACpF,IAAK,uBAAyBA,EAAKgC,KAAnC,CAIA,GAAIC,GAAYnC,EAAmBE,EAAKkC,OACjCD,IAIPpB,OAAOC,aAAaW,kBAzJL,kBAyJmC,QAASQ,EAAWjC,UAGnEmC","file":"../../masterbar/tracks-events.min.js","sourcesContent":["/* Do not modify this file directly. It is compiled from other files. */\n/*globals jQuery, JSON */\n( function( $ ) {\n\tvar eventName = 'masterbar_click';\n\n\tvar linksTracksEvents = {\n\t\t//top level items\n\t\t'wp-admin-bar-blog'                        : 'my_sites',\n\t\t'wp-admin-bar-newdash'                     : 'reader',\n\t\t'wp-admin-bar-ab-new-post'                 : 'write_button',\n\t\t'wp-admin-bar-my-account'                  : 'my_account',\n\t\t'wp-admin-bar-notes'                       : 'notifications',\n\t\t//my sites - top items\n\t\t'wp-admin-bar-switch-site'                 : 'my_sites_switch_site',\n\t\t'wp-admin-bar-blog-info'                   : 'my_sites_blog_info',\n\t\t'wp-admin-bar-site-view'                   : 'my_sites_view_site',\n\t\t'wp-admin-bar-blog-stats'                  : 'my_sites_blog_stats',\n\t\t'wp-admin-bar-activity'                    : 'my_sites_activity',\n\t\t'wp-admin-bar-plan'                        : 'my_sites_plan',\n\t\t'wp-admin-bar-plan-badge'                  : 'my_sites_plan_badge',\n\t\t//my sites - manage\n\t\t'wp-admin-bar-edit-page'                   : 'my_sites_manage_site_pages',\n\t\t'wp-admin-bar-new-page-badge'              : 'my_sites_manage_add_page',\n\t\t'wp-admin-bar-edit-post'                   : 'my_sites_manage_blog_posts',\n\t\t'wp-admin-bar-new-post-badge'              : 'my_sites_manage_add_new_post',\n\t\t'wp-admin-bar-edit-attachment'             : 'my_sites_manage_media',\n\t\t'wp-admin-bar-new-attachment-badge'        : 'my_sites_manage_add_media',\n\t\t'wp-admin-bar-comments'                    : 'my_sites_manage_comments',\n\t\t'wp-admin-bar-edit-testimonial'            : 'my_sites_manage_testimonials',\n\t\t'wp-admin-bar-new-testimonial'             : 'my_sites_manage_add_testimonial',\n\t\t'wp-admin-bar-edit-portfolio'              : 'my_sites_manage_portfolio',\n\t\t'wp-admin-bar-new-portfolio'               : 'my_sites_manage_add_portfolio',\n\t\t//my sites - personalize\n\t\t'wp-admin-bar-themes'                      : 'my_sites_personalize_themes',\n\t\t'wp-admin-bar-cmz'                         : 'my_sites_personalize_themes_customize',\n\t\t//my sites - configure\n\t\t'wp-admin-bar-sharing'                     : 'my_sites_configure_sharing',\n\t\t'wp-admin-bar-people'                      : 'my_sites_configure_people',\n\t\t'wp-admin-bar-people-add'                  : 'my_sites_configure_people_add_button',\n\t\t'wp-admin-bar-plugins'                     : 'my_sites_configure_plugins',\n\t\t'wp-admin-bar-plugins-add'                 : 'my_sites_configure_manage_plugins',\n\t\t'wp-admin-bar-blog-settings'               : 'my_sites_configure_settings',\n\t\t//reader\n\t\t'wp-admin-bar-followed-sites'              : 'reader_followed_sites',\n\t\t'wp-admin-bar-reader-followed-sites-manage': 'reader_manage_followed_sites',\n\t\t'wp-admin-bar-discover-discover'           : 'reader_discover',\n\t\t'wp-admin-bar-discover-search'             : 'reader_search',\n\t\t'wp-admin-bar-discover-recommended-blogs'  : 'reader_recommendations',\n\t\t'wp-admin-bar-my-activity-my-likes'        : 'reader_my_likes',\n\t\t//account\n\t\t'wp-admin-bar-user-info'                   : 'my_account_user_name',\n\t\t// account - profile\n\t\t'wp-admin-bar-my-profile'                  : 'my_account_profile_my_profile',\n\t\t'wp-admin-bar-account-settings'            : 'my_account_profile_account_settings',\n\t\t'wp-admin-bar-billing'                     : 'my_account_profile_manage_purchases',\n\t\t'wp-admin-bar-security'                    : 'my_account_profile_security',\n\t\t'wp-admin-bar-notifications'               : 'my_account_profile_notifications',\n\t\t//account - special\n\t\t'wp-admin-bar-get-apps'                    : 'my_account_special_get_apps',\n\t\t'wp-admin-bar-next-steps'                  : 'my_account_special_next_steps',\n\t\t'wp-admin-bar-help'                        : 'my_account_special_help'\n\t};\n\n\tvar notesTracksEvents = {\n\t\topenSite: function( data ) {\n\t\t\treturn {\n\t\t\t\tclicked: 'masterbar_notifications_panel_site',\n\t\t\t\tsite_id: data.siteId\n\t\t\t};\n\t\t},\n\t\topenPost: function( data ) {\n\t\t\treturn {\n\t\t\t\tclicked: 'masterbar_notifications_panel_post',\n\t\t\t\tsite_id: data.siteId,\n\t\t\t\tpost_id: data.postId\n\t\t\t};\n\t\t},\n\t\topenComment: function( data ) {\n\t\t\treturn {\n\t\t\t\tclicked: 'masterbar_notifications_panel_comment',\n\t\t\t\tsite_id: data.siteId,\n\t\t\t\tpost_id: data.postId,\n\t\t\t\tcomment_id: data.commentId\n\t\t\t};\n\t\t}\n\t};\n\n\tfunction parseJson( s, defaultValue ) {\n\t\ttry {\n\t\t\treturn JSON.parse( s );\n\t\t} catch ( e ) {\n\t\t\treturn defaultValue;\n\t\t}\n\t}\n\n\t$( document ).ready( function() {\n\t\tvar trackableLinks = '.mb-trackable .ab-item:not(div),' +\n\t\t\t'#wp-admin-bar-notes .ab-item,' +\n\t\t\t'#wp-admin-bar-user-info .ab-item,' +\n\t\t\t'.mb-trackable .ab-secondary';\n\n\t\t$( trackableLinks ).on( 'click touchstart', function( e ) {\n\t\t\tif ( ! window.jpTracksAJAX || 'function' !== typeof( window.jpTracksAJAX.record_ajax_event ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar $target = $( e.target ),\n\t\t\t\t\t$parent = $target.closest( 'li' );\n\n\t\t\tif ( ! $target.is( 'a' ) ) {\n\t\t\t\t$target = $target.closest( 'a' );\n\t\t\t}\n\n\t\t\tif ( ! $parent || ! $target ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar trackingId = $target.attr( 'ID' ) || $parent.attr( 'ID' );\n\n\t\t\tif ( ! linksTracksEvents.hasOwnProperty( trackingId ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar eventProps = { 'clicked': linksTracksEvents[ trackingId ] };\n\n\t\t\tif ( $parent.hasClass( 'menupop' ) ) {\n\t\t\t\twindow.jpTracksAJAX.record_ajax_event( eventName, 'click', eventProps );\n\t\t\t} else {\n\t\t\t\te.preventDefault();\n\t\t\t\twindow.jpTracksAJAX.record_ajax_event( eventName, 'click', eventProps ).always( function() {\n\t\t\t\t\twindow.location = $target.attr( 'href' );\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t} );\n\n\t// listen for postMessage events from the notifications iframe\n\t$( window ).on( 'message', function( e ) {\n\t\tif ( ! window.jpTracksAJAX || 'function' !== typeof( window.jpTracksAJAX.record_ajax_event ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar event = ! e.data && e.originalEvent.data ? e.originalEvent : e;\n\t\tif ( event.origin !== 'https://widgets.wp.com' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar data = ( 'string' === typeof event.data ) ? parseJson( event.data, {} ) : event.data;\n\t\tif ( 'notesIframeMessage' !== data.type ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar eventData = notesTracksEvents[ data.action ];\n\t\tif ( ! eventData ) {\n\t\t\treturn;\n\t\t}\n\n\t\twindow.jpTracksAJAX.record_ajax_event( eventName, 'click', eventData( data ) );\n\t} );\n\n} )( jQuery );\n"]}