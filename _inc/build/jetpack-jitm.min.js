/* Do not modify this file directly. It is compiled from other files. */
jQuery(document).ready(function(t){var e={default:function(e){var a='<div class="jitm-card jitm-banner '+(e.CTA.message?"has-call-to-action":"")+" is-upgrade-premium "+e.content.classes+'" data-stats_url="'+e.jitm_stats_url+'">';if(a+='<div class="jitm-banner__icon-plan">'+e.content.icon+"</div>",a+='<div class="jitm-banner__content">',a+='<div class="jitm-banner__info">',a+='<div class="jitm-banner__title">'+e.content.message+"</div>",e.content.description&&""!==e.content.description){if(a+='<div class="jitm-banner__description">'+e.content.description,e.content.list.length>0){a+='<ul class="banner__list">';for(var i=0;i<e.content.list.length;i++){var n=e.content.list[i].item;e.content.list[i].url&&(n='<a href="'+e.content.list[i].url+'" target="_blank" rel="noopener noreferrer" data-module="'+e.feature_class+'" data-jptracks-name="nudge_item_click" data-jptracks-prop="jitm-'+e.id+'">'+n+"</a>"),a+='<li><svg class="gridicon gridicons-checkmark" height="16" width="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M9 19.414l-6.707-6.707 1.414-1.414L9 16.586 20.293 5.293l1.414 1.414" /></g></svg>'+n+"</li>"}}a+="</div>"}if(a+="</div>",e.activate_module&&(a+='<div class="jitm-banner__action" id="jitm-banner__activate">',a+='<a href="#" data-module="'+e.activate_module+'" type="button" class="jitm-button is-compact is-primary jptracks" data-jptracks-name="nudge_click" data-jptracks-prop="jitm-'+e.id+'-activate_module">'+window.jitm_config.activate_module_text+"</a>",a+="</div>"),e.CTA.message){var c="jitm-button is-compact jptracks";e.CTA.primary&&null===e.activate_module&&(c+=" is-primary"),a+='<div class="jitm-banner__action">',a+='<a href="'+e.url+'" target="'+(!1===e.CTA.newWindow?"_self":"_blank")+'" rel="noopener noreferrer" title="'+e.CTA.message+'" data-module="'+e.feature_class+'" type="button" class="'+c+'" data-jptracks-name="nudge_click" data-jptracks-prop="jitm-'+e.id+'">'+e.CTA.message+"</a>",a+="</div>"}return a+='<a href="#" data-module="'+e.feature_class+'" class="jitm-banner__dismiss"></a>',a+="</div>",t(a+="</div>")}},a=function(){t(".jetpack-jitm-message").each(function(){var a=t(this),i=a.data("message-path"),n=a.data("query"),c=a.data("redirect"),r=location.hash;"_dashboard"!==(r=r.replace(/#\//,"_"))&&(i=i.replace("toplevel_page_jetpack","toplevel_page_jetpack"+r)),t.get(window.jitm_config.api_root+"jetpack/v4/jitm",{message_path:i,query:n,_wpnonce:a.data("nonce")}).then(function(i){"object"==typeof i&&i[1]&&(i=[i[1]]),0!==i.length&&i[0].content&&function(a,i,n){var c;(c=i.template)&&e[c]||(c="default"),i.url=i.url+"&redirect="+n;var r,o=e[c](i);o.find(".jitm-banner__dismiss").click((r=o,function(e){e.preventDefault(),r.hide(),t.ajax({url:window.jitm_config.api_root+"jetpack/v4/jitm",method:"POST",data:{id:i.id,feature_class:i.feature_class}})})),t("#jp-admin-notices").length>0?(a.innerHTML=o,o.prependTo(t("#jp-admin-notices"))):a.replaceWith(o),o.find("#jitm-banner__activate a").click(function(){var e=t(this);if(e.attr("disabled"))return!1;t.ajax({url:window.jitm_config.api_root+"jetpack/v4/module/"+e.data("module")+"/active",method:"POST",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",a.data("nonce")),t("#jitm-banner__activate a").text(window.jitm_config.activating_module_text),t("#jitm-banner__activate a").attr("disabled",!0)}}).done(function(){t("#jitm-banner__activate a").text(window.jitm_config.activated_module_text),t("#jitm-banner__activate a").attr("disabled",!0),setTimeout(function(){o.fadeOut("slow")},2e3)})})}(a,i[0],c)})})};a(),t(window).bind("hashchange",function(t){if(t.originalEvent.newURL.indexOf("jetpack#/")>=0){var e=document.querySelector(".jitm-card");e&&e.remove(),a()}})});