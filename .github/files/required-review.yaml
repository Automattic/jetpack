# Everyone who can approve anything can merge pnpm.lock and docs.
- name: lockfiles, plugin composer.json, changelogs, docs
  paths:
   - 'docs/**'
   - 'pnpm-lock.yaml'
   - 'projects/*/*/composer.lock'
   - 'projects/plugins/*/composer.json'
   - 'projects/*/*/changelog/*'
  consume: true
  teams:
   # Unfortunately this list need to be maintaned manually...
   # yamato-backup-and-security is the group that consists of both yamato-scan and yamato-backup teams.
   - avengers
   - caribou
   - heart-of-gold
   - jetpack-approvers
   - jetpack-reach
   - red
   - yamato-backup-and-security

# Jetpack Approvers need to review changes to the monorepo itself.
- name: Monorepo itself
  paths:
   - '!projects/**'
  teams:
   - jetpack-approvers

# Jetpack Approvers review the Jetpack plugin.
- name: Jetpack-the-plugin
  paths:
   - 'projects/plugins/jetpack/**'
  teams:
   - jetpack-approvers

# Packages owned by Ground Control.
- name: Ground Control packages
  paths:
   - 'projects/js-packages/babel-plugin-replace-textdomain/**'
   - 'projects/js-packages/eslint-changed/**'
   - 'projects/js-packages/eslint-config-target-es/**'
   - 'projects/js-packages/i18n-check-webpack-plugin/**'
   - 'projects/js-packages/i18n-loader-webpack-plugin/**'
   - 'projects/js-packages/remove-asset-webpack-plugin/**'
   - 'projects/js-packages/webpack-config/**'
   - 'projects/packages/autoloader/**'
   - 'projects/packages/changelogger/**'
   - 'projects/packages/codesniffer/**'
   - 'projects/packages/ignorefile/**'
   - 'projects/packages/phpcs-filter/**'
  teams:
   - jetpack-approvers

# The Avengers team reviews changes to the CRM plugin,
# and can add dependencies to the monorepo's lock file.
- name: CRM
  paths:
    - 'projects/plugins/crm/**'
  teams:
    - avengers
    - jetpack-approvers

# The Caribou team reviews changes to the Migration plugin and its Import package,
# and can add dependencies to the monorepo's lock file.
- name: Migration
  paths:
    - 'projects/packages/import/**'
    - 'projects/plugins/migration/**'
  teams:
    - caribou
    - jetpack-approvers

# The Backup team reviews changes to the VaultPress and Backup plugin,
# and can add dependencies to the monorepo's lock file.
- name: VaultPress & Backup
  paths:
   - 'projects/packages/backup/**'
   - 'projects/plugins/vaultpress/**'
   - 'projects/plugins/backup/**'
  teams:
   - yamato-backup
   - jetpack-approvers

# The Scan team reviews changes to the protect plugin, the WAF package, etc,
# and can add dependencies to the monorepo's lock file.
- name: Scan
  paths:
    - 'projects/packages/waf/**'
    - 'projects/plugins/protect/**'
  teams:
    - yamato-scan
    - jetpack-approvers

# The Heart of Gold team reviews changes to the Boost or Super Cache plugin,
# and can add dependencies to the monorepo's lock file.
- name: Boost
  paths:
   - 'projects/plugins/boost/**'
   - 'projects/plugins/super-cache/**'
   - 'projects/js-packages/image-guide/**'
   - 'projects/js-packages/svelte-data-sync-client/**'
   - 'projects/packages/wp-js-data-sync/**'
  teams:
   - heart-of-gold
   - jetpack-approvers
   - '@donnchawp'

# The Red team reviews changes to the Search plugin, and the Search package.
- name: Search
  paths:
   - 'projects/plugins/search/**'
   - 'projects/packages/search/**'
  teams:
   - red
   - jetpack-approvers

# The Red team reviews changes to the Stats and its Admin package.
- name: Stats
  paths:
   - 'projects/packages/stats/**'
   - 'projects/packages/stats-admin/**'
  teams:
   - red
   - jetpack-approvers

# The Reach team reviews changes to the Social plugin, and the Publicize package.
- name: Social
  paths:
   - 'projects/plugins/social/**'
   - 'projects/packages/publicize/**'
   - 'projects/js-packages/publicize-components/**'
  teams:
   - jetpack-reach
   - jetpack-approvers

# The Crowdsignal team reviews changes to the Forms package.
- name: Forms
  paths:
    - 'projects/packages/forms/**'
  teams:
    - '@cgastrell'
    - '@ice9js'
    - jetpack-approvers

# Jetpack Approvers review everything that hasn't been specifically assigned above.
# This needs to be last.
- name: Default to Jetpack Approvers
  paths: unmatched
  teams:
   - jetpack-approvers
